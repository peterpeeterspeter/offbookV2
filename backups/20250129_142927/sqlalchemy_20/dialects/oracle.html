<!DOCTYPE html>



<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>
            
    
    Oracle
 &mdash;
    SQLAlchemy 2.0 Documentation

        </title>

        
            <!-- begin iterate through site-imported + sphinx environment css_files -->
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
                <link rel="stylesheet" href="../_static/default.css" type="text/css" />
                <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
                <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
                <link rel="stylesheet" href="../_static/changelog.css" type="text/css" />
                <link rel="stylesheet" href="../_static/sphinx_paramlinks.css" type="text/css" />
            <!-- end iterate through site-imported + sphinx environment css_files -->
        

        

    

    <!-- begin layout.mako headers -->

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
        <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="SQLAlchemy 2.0 Documentation" href="../index.html" />
        <link rel="up" title="Dialects" href="index.html" />
        <link rel="next" title="Microsoft SQL Server" href="mssql.html" />
        <link rel="prev" title="SQLite" href="sqlite.html" />
    <!-- end layout.mako headers -->


    </head>
    <body>
        
















<div id="docs-container">





<div id="docs-top-navigation-container" class="body-background">
<div id="docs-header">
    <div id="docs-version-header">
        Release: <span class="version-num">2.0.37</span>


        | Release Date: January 9, 2025

    </div>

    <h1><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h1>

</div>
</div>

<div id="docs-body-container">

    <div id="fixed-sidebar" class="withsidebar">



        <div id="docs-sidebar-popout">
            <h3><a href="../index.html">SQLAlchemy 2.0 Documentation</a></h3>
            <p id="sidebar-topnav">
                <a href="../index.html">Home</a>
            </p>

            <div id="sidebar-search">
                <form class="search" action="../search.html" method="get">
                  <label>
                  Search terms:
                  <input type="text" placeholder="search..." name="q" size="12" />
                  </label>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </div>

        </div>

        <div id="docs-sidebar">

        <div id="sidebar-banner">
            
        </div>

        <div id="docs-sidebar-inner">

        
        <h3>
            <a href="index.html" title="Dialects">Dialects</a>
        </h3>

        <ul>
<li><span class="link-container"><a class="reference external" href="postgresql.html">PostgreSQL</a></span></li>
<li><span class="link-container"><a class="reference external" href="mysql.html">MySQL and MariaDB</a></span></li>
<li><span class="link-container"><a class="reference external" href="sqlite.html">SQLite</a></span></li>
<li class="selected"><span class="link-container"><strong>Oracle</strong><a class="paramlink headerlink reference internal" href="#">¶</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#dialect-oracle">Support for the Oracle Database database.</a></span></li>
<li><span class="link-container"><a class="reference external" href="#auto-increment-behavior">Auto Increment Behavior</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#specifying-generated-as-identity-oracle-database-12-and-above">Specifying GENERATED AS IDENTITY (Oracle Database 12 and above)</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-a-sequence-all-oracle-database-versions">Using a SEQUENCE (all Oracle Database versions)</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#transaction-isolation-level-autocommit">Transaction Isolation Level / Autocommit</a></span></li>
<li><span class="link-container"><a class="reference external" href="#identifier-casing">Identifier Casing</a></span></li>
<li><span class="link-container"><a class="reference external" href="#maximum-identifier-lengths">Maximum Identifier Lengths</a></span></li>
<li><span class="link-container"><a class="reference external" href="#limit-offset-fetch-support">LIMIT/OFFSET/FETCH Support</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#notes-on-limit-offset-emulation-when-fetch-method-cannot-be-used">Notes on LIMIT / OFFSET emulation (when fetch() method cannot be used)</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#returning-support">RETURNING Support</a></span></li>
<li><span class="link-container"><a class="reference external" href="#on-update-cascade">ON UPDATE CASCADE</a></span></li>
<li><span class="link-container"><a class="reference external" href="#oracle-database-8-compatibility">Oracle Database 8 Compatibility</a></span></li>
<li><span class="link-container"><a class="reference external" href="#synonym-dblink-reflection">Synonym/DBLINK Reflection</a></span></li>
<li><span class="link-container"><a class="reference external" href="#constraint-reflection">Constraint Reflection</a></span></li>
<li><span class="link-container"><a class="reference external" href="#table-names-with-system-sysaux-tablespaces">Table names with SYSTEM/SYSAUX tablespaces</a></span></li>
<li><span class="link-container"><a class="reference external" href="#float-double-support-and-behaviors">FLOAT / DOUBLE Support and Behaviors</a></span></li>
<li><span class="link-container"><a class="reference external" href="#datetime-compatibility">DateTime Compatibility</a></span></li>
<li><span class="link-container"><a class="reference external" href="#oracle-database-table-options">Oracle Database Table Options</a></span></li>
<li><span class="link-container"><a class="reference external" href="#oracle-database-specific-index-options">Oracle Database Specific Index Options</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#bitmap-indexes">Bitmap Indexes</a></span></li>
<li><span class="link-container"><a class="reference external" href="#index-compression">Index compression</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#oracle-database-data-types">Oracle Database Data Types</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.BFILE"><code class="docutils literal notranslate"><span class="pre">BFILE</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.BFILE.__init__"><code class="docutils literal notranslate"><span class="pre">BFILE.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE"><code class="docutils literal notranslate"><span class="pre">BINARY_DOUBLE</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE.__init__"><code class="docutils literal notranslate"><span class="pre">BINARY_DOUBLE.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT"><code class="docutils literal notranslate"><span class="pre">BINARY_FLOAT</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT.__init__"><code class="docutils literal notranslate"><span class="pre">BINARY_FLOAT.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.DATE"><code class="docutils literal notranslate"><span class="pre">DATE</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.DATE.__init__"><code class="docutils literal notranslate"><span class="pre">DATE.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.FLOAT"><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.FLOAT.__init__"><code class="docutils literal notranslate"><span class="pre">FLOAT.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.INTERVAL"><code class="docutils literal notranslate"><span class="pre">INTERVAL</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.INTERVAL.__init__"><code class="docutils literal notranslate"><span class="pre">INTERVAL.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.NCLOB"><code class="docutils literal notranslate"><span class="pre">NCLOB</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.NCLOB.__init__"><code class="docutils literal notranslate"><span class="pre">NCLOB.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.NVARCHAR2"><code class="docutils literal notranslate"><span class="pre">NVARCHAR2</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.NUMBER"><code class="docutils literal notranslate"><span class="pre">NUMBER</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.LONG"><code class="docutils literal notranslate"><span class="pre">LONG</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.LONG.__init__"><code class="docutils literal notranslate"><span class="pre">LONG.__init__()</span></code></a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.RAW"><code class="docutils literal notranslate"><span class="pre">RAW</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.ROWID"><code class="docutils literal notranslate"><span class="pre">ROWID</span></code></a></span></li>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.TIMESTAMP"><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></a></span><ul>
<li><span class="link-container"><a class="reference external" href="#sqlalchemy.dialects.oracle.TIMESTAMP.__init__"><code class="docutils literal notranslate"><span class="pre">TIMESTAMP.__init__()</span></code></a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#module-sqlalchemy.dialects.oracle.oracledb">python-oracledb</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#dialect-oracle-oracledb-url">DBAPI</a></span></li>
<li><span class="link-container"><a class="reference external" href="#dialect-oracle-oracledb-connect">Connecting</a></span></li>
<li><span class="link-container"><a class="reference external" href="#description">Description</a></span></li>
<li><span class="link-container"><a class="reference external" href="#thick-mode-support">Thick mode support</a></span></li>
<li><span class="link-container"><a class="reference external" href="#connecting-to-oracle-database">Connecting to Oracle Database</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#connecting-with-easy-connect-strings">Connecting with Easy Connect strings</a></span></li>
<li><span class="link-container"><a class="reference external" href="#passing-python-oracledb-connect-arguments">Passing python-oracledb connect arguments</a></span></li>
<li><span class="link-container"><a class="reference external" href="#connecting-with-tnsnames-ora-tns-aliases">Connecting with tnsnames.ora TNS aliases</a></span></li>
<li><span class="link-container"><a class="reference external" href="#connecting-to-oracle-autonomous-database">Connecting to Oracle Autonomous Database</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#connection-pooling">Connection Pooling</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-oracle-database-resident-connection-pooling-drcp">Using Oracle Database Resident Connection Pooling (DRCP)</a></span></li>
<li><span class="link-container"><a class="reference external" href="#engine-options-consumed-by-the-sqlalchemy-oracledb-dialect-outside-of-the-driver">Engine Options consumed by the SQLAlchemy oracledb dialect outside of the driver</a></span></li>
<li><span class="link-container"><a class="reference external" href="#unicode">Unicode</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#ensuring-the-correct-client-encoding">Ensuring the Correct Client Encoding</a></span></li>
<li><span class="link-container"><a class="reference external" href="#unicode-specific-column-datatypes">Unicode-specific Column datatypes</a></span></li>
<li><span class="link-container"><a class="reference external" href="#encoding-errors">Encoding Errors</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#fine-grained-control-over-python-oracledb-data-binding-with-setinputsizes">Fine grained control over python-oracledb data binding with setinputsizes</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#example-1-logging-all-setinputsizes-calls">Example 1 - logging all setinputsizes calls</a></span></li>
<li><span class="link-container"><a class="reference external" href="#example-2-remove-all-bindings-to-clob">Example 2 - remove all bindings to CLOB</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#lob-datatypes">LOB Datatypes</a></span></li>
<li><span class="link-container"><a class="reference external" href="#oracledb-returning">RETURNING Support</a></span></li>
<li><span class="link-container"><a class="reference external" href="#two-phase-transaction-support">Two Phase Transaction Support</a></span></li>
<li><span class="link-container"><a class="reference external" href="#precision-numerics">Precision Numerics</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#cx-oracle">cx_Oracle</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#dialect-oracle-cx_oracle-url">DBAPI</a></span></li>
<li><span class="link-container"><a class="reference external" href="#dialect-oracle-cx_oracle-connect">Connecting</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id3">Description</a></span></li>
<li><span class="link-container"><a class="reference external" href="#dsn-vs-hostname-connections">DSN vs. Hostname connections</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#hostname-connections-with-easy-connect-syntax">Hostname Connections with Easy Connect Syntax</a></span></li>
<li><span class="link-container"><a class="reference external" href="#connections-with-tnsnames-ora-or-to-oracle-autonomous-database">Connections with tnsnames.ora or to Oracle Autonomous Database</a></span></li>
<li><span class="link-container"><a class="reference external" href="#sid-connections">SID Connections</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#passing-cx-oracle-connect-arguments">Passing cx_Oracle connect arguments</a></span></li>
<li><span class="link-container"><a class="reference external" href="#options-consumed-by-the-sqlalchemy-cx-oracle-dialect-outside-of-the-driver">Options consumed by the SQLAlchemy cx_Oracle dialect outside of the driver</a></span></li>
<li><span class="link-container"><a class="reference external" href="#using-cx-oracle-sessionpool">Using cx_Oracle SessionPool</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id4">Using Oracle Database Resident Connection Pooling (DRCP)</a></span></li>
<li><span class="link-container"><a class="reference external" href="#cx-oracle-unicode">Unicode</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#id6">Ensuring the Correct Client Encoding</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id8">Unicode-specific Column datatypes</a></span></li>
<li><span class="link-container"><a class="reference external" href="#cx-oracle-unicode-encoding-errors">Encoding Errors</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#fine-grained-control-over-cx-oracle-data-binding-performance-with-setinputsizes">Fine grained control over cx_Oracle data binding performance with setinputsizes</a></span><ul>
<li><span class="link-container"><a class="reference external" href="#id11">Example 1 - logging all setinputsizes calls</a></span></li>
<li><span class="link-container"><a class="reference external" href="#id12">Example 2 - remove all bindings to CLOB</a></span></li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="#cx-oracle-lob">LOB Datatypes</a></span></li>
<li><span class="link-container"><a class="reference external" href="#cx-oracle-returning">RETURNING Support</a></span></li>
<li><span class="link-container"><a class="reference external" href="#two-phase-transactions-not-supported">Two Phase Transactions Not Supported</a></span></li>
<li><span class="link-container"><a class="reference external" href="#cx-oracle-numeric">Precision Numerics</a></span></li>
</ul>
</li>
</ul>
</li>
<li><span class="link-container"><a class="reference external" href="mssql.html">Microsoft SQL Server</a></span></li>
</ul>



        </div>

        </div>

    </div>

    <div id="narrow-index-nav">
        <form class="search" action="../search.html" method="get">
            <label>
                Search terms:
            <input type="text" placeholder="search..." name="q" size="12" />
            </label>
            <input type="submit" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
        </form>

        <p>
        <a href="../index.html">Home</a>
        </p>

    </div>


        <div id="docs-narrow-top-navigation">
            <ul>
                <li><b>Previous:</b>
                <a href="sqlite.html" title="previous chapter">SQLite</a></li>
                <li><b>Next:</b>
                <a href="mssql.html" title="next chapter">Microsoft SQL Server</a></li>

            <li><b>Up:</b> <a href="../index.html">Home</a></li>
                    <ul><li><a href="index.html" title="Dialects">Dialects</a></li>
                </ul>



            <li><b>On this page:</b></li>
            <ul>
<li><a class="reference internal" href="#module-sqlalchemy.dialects.oracle.base">Oracle</a><ul>
<li><a class="reference internal" href="#dialect-oracle">Support for the Oracle Database database.</a></li>
<li><a class="reference internal" href="#auto-increment-behavior">Auto Increment Behavior</a><ul>
<li><a class="reference internal" href="#specifying-generated-as-identity-oracle-database-12-and-above">Specifying GENERATED AS IDENTITY (Oracle Database 12 and above)</a></li>
<li><a class="reference internal" href="#using-a-sequence-all-oracle-database-versions">Using a SEQUENCE (all Oracle Database versions)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transaction-isolation-level-autocommit">Transaction Isolation Level / Autocommit</a></li>
<li><a class="reference internal" href="#identifier-casing">Identifier Casing</a></li>
<li><a class="reference internal" href="#maximum-identifier-lengths">Maximum Identifier Lengths</a></li>
<li><a class="reference internal" href="#limit-offset-fetch-support">LIMIT/OFFSET/FETCH Support</a><ul>
<li><a class="reference internal" href="#notes-on-limit-offset-emulation-when-fetch-method-cannot-be-used">Notes on LIMIT / OFFSET emulation (when fetch() method cannot be used)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#returning-support">RETURNING Support</a></li>
<li><a class="reference internal" href="#on-update-cascade">ON UPDATE CASCADE</a></li>
<li><a class="reference internal" href="#oracle-database-8-compatibility">Oracle Database 8 Compatibility</a></li>
<li><a class="reference internal" href="#synonym-dblink-reflection">Synonym/DBLINK Reflection</a></li>
<li><a class="reference internal" href="#constraint-reflection">Constraint Reflection</a></li>
<li><a class="reference internal" href="#table-names-with-system-sysaux-tablespaces">Table names with SYSTEM/SYSAUX tablespaces</a></li>
<li><a class="reference internal" href="#float-double-support-and-behaviors">FLOAT / DOUBLE Support and Behaviors</a></li>
<li><a class="reference internal" href="#datetime-compatibility">DateTime Compatibility</a></li>
<li><a class="reference internal" href="#oracle-database-table-options">Oracle Database Table Options</a></li>
<li><a class="reference internal" href="#oracle-database-specific-index-options">Oracle Database Specific Index Options</a><ul>
<li><a class="reference internal" href="#bitmap-indexes">Bitmap Indexes</a></li>
<li><a class="reference internal" href="#index-compression">Index compression</a></li>
</ul>
</li>
<li><a class="reference internal" href="#oracle-database-data-types">Oracle Database Data Types</a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.BFILE"><code class="docutils literal notranslate"><span class="pre">BFILE</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.BFILE.__init__"><code class="docutils literal notranslate"><span class="pre">BFILE.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE"><code class="docutils literal notranslate"><span class="pre">BINARY_DOUBLE</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE.__init__"><code class="docutils literal notranslate"><span class="pre">BINARY_DOUBLE.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT"><code class="docutils literal notranslate"><span class="pre">BINARY_FLOAT</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT.__init__"><code class="docutils literal notranslate"><span class="pre">BINARY_FLOAT.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.DATE"><code class="docutils literal notranslate"><span class="pre">DATE</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.DATE.__init__"><code class="docutils literal notranslate"><span class="pre">DATE.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT"><code class="docutils literal notranslate"><span class="pre">FLOAT</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT.__init__"><code class="docutils literal notranslate"><span class="pre">FLOAT.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.INTERVAL"><code class="docutils literal notranslate"><span class="pre">INTERVAL</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.INTERVAL.__init__"><code class="docutils literal notranslate"><span class="pre">INTERVAL.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB"><code class="docutils literal notranslate"><span class="pre">NCLOB</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB.__init__"><code class="docutils literal notranslate"><span class="pre">NCLOB.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.NVARCHAR2"><code class="docutils literal notranslate"><span class="pre">NVARCHAR2</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.NUMBER"><code class="docutils literal notranslate"><span class="pre">NUMBER</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.LONG"><code class="docutils literal notranslate"><span class="pre">LONG</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.LONG.__init__"><code class="docutils literal notranslate"><span class="pre">LONG.__init__()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.RAW"><code class="docutils literal notranslate"><span class="pre">RAW</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.ROWID"><code class="docutils literal notranslate"><span class="pre">ROWID</span></code></a></li>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP"><code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></a><ul>
<li><a class="reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP.__init__"><code class="docutils literal notranslate"><span class="pre">TIMESTAMP.__init__()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-sqlalchemy.dialects.oracle.oracledb">python-oracledb</a><ul>
<li><a class="reference internal" href="#dialect-oracle-oracledb-url">DBAPI</a></li>
<li><a class="reference internal" href="#dialect-oracle-oracledb-connect">Connecting</a></li>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#thick-mode-support">Thick mode support</a></li>
<li><a class="reference internal" href="#connecting-to-oracle-database">Connecting to Oracle Database</a><ul>
<li><a class="reference internal" href="#connecting-with-easy-connect-strings">Connecting with Easy Connect strings</a></li>
<li><a class="reference internal" href="#passing-python-oracledb-connect-arguments">Passing python-oracledb connect arguments</a></li>
<li><a class="reference internal" href="#connecting-with-tnsnames-ora-tns-aliases">Connecting with tnsnames.ora TNS aliases</a></li>
<li><a class="reference internal" href="#connecting-to-oracle-autonomous-database">Connecting to Oracle Autonomous Database</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connection-pooling">Connection Pooling</a></li>
<li><a class="reference internal" href="#using-oracle-database-resident-connection-pooling-drcp">Using Oracle Database Resident Connection Pooling (DRCP)</a></li>
<li><a class="reference internal" href="#engine-options-consumed-by-the-sqlalchemy-oracledb-dialect-outside-of-the-driver">Engine Options consumed by the SQLAlchemy oracledb dialect outside of the driver</a></li>
<li><a class="reference internal" href="#unicode">Unicode</a><ul>
<li><a class="reference internal" href="#ensuring-the-correct-client-encoding">Ensuring the Correct Client Encoding</a></li>
<li><a class="reference internal" href="#unicode-specific-column-datatypes">Unicode-specific Column datatypes</a></li>
<li><a class="reference internal" href="#encoding-errors">Encoding Errors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fine-grained-control-over-python-oracledb-data-binding-with-setinputsizes">Fine grained control over python-oracledb data binding with setinputsizes</a><ul>
<li><a class="reference internal" href="#example-1-logging-all-setinputsizes-calls">Example 1 - logging all setinputsizes calls</a></li>
<li><a class="reference internal" href="#example-2-remove-all-bindings-to-clob">Example 2 - remove all bindings to CLOB</a></li>
</ul>
</li>
<li><a class="reference internal" href="#lob-datatypes">LOB Datatypes</a></li>
<li><a class="reference internal" href="#oracledb-returning">RETURNING Support</a></li>
<li><a class="reference internal" href="#two-phase-transaction-support">Two Phase Transaction Support</a></li>
<li><a class="reference internal" href="#precision-numerics">Precision Numerics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cx-oracle">cx_Oracle</a><ul>
<li><a class="reference internal" href="#dialect-oracle-cx_oracle-url">DBAPI</a></li>
<li><a class="reference internal" href="#dialect-oracle-cx_oracle-connect">Connecting</a></li>
<li><a class="reference internal" href="#id3">Description</a></li>
<li><a class="reference internal" href="#dsn-vs-hostname-connections">DSN vs. Hostname connections</a><ul>
<li><a class="reference internal" href="#hostname-connections-with-easy-connect-syntax">Hostname Connections with Easy Connect Syntax</a></li>
<li><a class="reference internal" href="#connections-with-tnsnames-ora-or-to-oracle-autonomous-database">Connections with tnsnames.ora or to Oracle Autonomous Database</a></li>
<li><a class="reference internal" href="#sid-connections">SID Connections</a></li>
</ul>
</li>
<li><a class="reference internal" href="#passing-cx-oracle-connect-arguments">Passing cx_Oracle connect arguments</a></li>
<li><a class="reference internal" href="#options-consumed-by-the-sqlalchemy-cx-oracle-dialect-outside-of-the-driver">Options consumed by the SQLAlchemy cx_Oracle dialect outside of the driver</a></li>
<li><a class="reference internal" href="#using-cx-oracle-sessionpool">Using cx_Oracle SessionPool</a></li>
<li><a class="reference internal" href="#id4">Using Oracle Database Resident Connection Pooling (DRCP)</a></li>
<li><a class="reference internal" href="#cx-oracle-unicode">Unicode</a><ul>
<li><a class="reference internal" href="#id6">Ensuring the Correct Client Encoding</a></li>
<li><a class="reference internal" href="#id8">Unicode-specific Column datatypes</a></li>
<li><a class="reference internal" href="#cx-oracle-unicode-encoding-errors">Encoding Errors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fine-grained-control-over-cx-oracle-data-binding-performance-with-setinputsizes">Fine grained control over cx_Oracle data binding performance with setinputsizes</a><ul>
<li><a class="reference internal" href="#id11">Example 1 - logging all setinputsizes calls</a></li>
<li><a class="reference internal" href="#id12">Example 2 - remove all bindings to CLOB</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cx-oracle-lob">LOB Datatypes</a></li>
<li><a class="reference internal" href="#cx-oracle-returning">RETURNING Support</a></li>
<li><a class="reference internal" href="#two-phase-transactions-not-supported">Two Phase Transactions Not Supported</a></li>
<li><a class="reference internal" href="#cx-oracle-numeric">Precision Numerics</a></li>
</ul>
</li>
</ul>
</li>
</ul>


            </ul>

        </div>



    <div id="docs-body" role="main" class="withsidebar dialects-oracle" >
        
<section id="module-sqlalchemy.dialects.oracle.base">
<span id="oracle"></span><span id="oracle-toplevel"></span><h1>Oracle<a class="headerlink" href="#module-sqlalchemy.dialects.oracle.base" title="Link to this heading">¶</a></h1>
<section id="dialect-oracle">
<p>Support for the Oracle Database database.</p>
<p>The following table summarizes current support levels for database release versions.</p>
<p><table class="docutils align-default" id="id16">
<caption><span class="caption-text"><strong>Supported Oracle Database versions</strong></span><a class="headerlink" href="#id16" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Support type</p></th>
<th class="head"><p>Versions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="index.html#term-Supported-version"><span class="xref std std-term">Supported version</span></a></p></td>
<td><p>11+</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="index.html#term-Best-effort"><span class="xref std std-term">Best effort</span></a></p></td>
<td><p>9+</p></td>
</tr>
</tbody>
</table>
</p>
<h2>DBAPI Support<a class="headerlink" href="#dialect-oracle" title="Link to this heading">¶</a></h2>
<p>The following dialect/DBAPI options are available.  Please refer to individual DBAPI sections for connect information.<ul class="simple">
<li><p><a class="reference external" href="#module-sqlalchemy.dialects.oracle.oracledb">python-oracledb</a></p></li>
<li><p><a class="reference external" href="#module-sqlalchemy.dialects.oracle.cx_oracle">cx-Oracle</a></p></li>
</ul>
</p>
</section>
<section id="auto-increment-behavior">
<h2>Auto Increment Behavior<a class="headerlink" href="#auto-increment-behavior" title="Link to this heading">¶</a></h2>
<p>SQLAlchemy Table objects which include integer primary keys are usually assumed
to have “autoincrementing” behavior, meaning they can generate their own
primary key values upon INSERT. For use within Oracle Database, two options are
available, which are the use of IDENTITY columns (Oracle Database 12 and above
only) or the association of a SEQUENCE with the column.</p>
<section id="specifying-generated-as-identity-oracle-database-12-and-above">
<h3>Specifying GENERATED AS IDENTITY (Oracle Database 12 and above)<a class="headerlink" href="#specifying-generated-as-identity-oracle-database-12-and-above" title="Link to this heading">¶</a></h3>
<p>Starting from version 12, Oracle Database can make use of identity columns
using the <code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code> to specify the autoincrementing behavior:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Identity</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="o">...</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<p>The CREATE TABLE for the above <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object would be:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">mytable</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">GENERATED</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="k">IDENTITY</span><span class="w"> </span><span class="p">(</span><span class="k">START</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span>
<span class="w">    </span><span class="p">...,</span>
<span class="w">    </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">)</span></pre></div>
</div>
<p>The <a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> object support many options to control the
“autoincrementing” behavior of the column, like the starting value, the
incrementing value, etc.  In addition to the standard options, Oracle Database
supports setting <a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Identity.params.always" title="sqlalchemy.schema.Identity"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Identity.always</span></code></a> to <code class="docutils literal notranslate"><span class="pre">None</span></code> to use the
default generated mode, rendering GENERATED AS IDENTITY in the DDL. It also supports
setting <a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Identity.params.on_null" title="sqlalchemy.schema.Identity"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Identity.on_null</span></code></a> to <code class="docutils literal notranslate"><span class="pre">True</span></code> to specify ON NULL
in conjunction with a ‘BY DEFAULT’ identity column.</p>
</section>
<section id="using-a-sequence-all-oracle-database-versions">
<h3>Using a SEQUENCE (all Oracle Database versions)<a class="headerlink" href="#using-a-sequence-all-oracle-database-versions" title="Link to this heading">¶</a></h3>
<p>Older version of Oracle Database had no “autoincrement” feature: SQLAlchemy
relies upon sequences to produce these values.  With the older Oracle Database
versions, <em>a sequence must always be explicitly specified to enable
autoincrement</em>.  This is divergent with the majority of documentation examples
which assume the usage of an autoincrement-capable database.  To specify
sequences, use the sqlalchemy.schema.Sequence object which is passed to a
Column construct:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">(</span><span class="s2">&quot;id_seq&quot;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>
    <span class="o">...</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<p>This step is also required when using table reflection, i.e. autoload_with=engine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">(</span><span class="s2">&quot;id_seq&quot;</span><span class="p">,</span> <span class="n">start</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
    <span class="n">autoload_with</span><span class="o">=</span><span class="n">engine</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>Added <a class="reference internal" href="../core/defaults.html#sqlalchemy.schema.Identity" title="sqlalchemy.schema.Identity"><code class="xref py py-class docutils literal notranslate"><span class="pre">Identity</span></code></a> construct
in a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> to specify the option of an autoincrementing
column.</p>
</div>
</section>
</section>
<section id="transaction-isolation-level-autocommit">
<span id="oracle-isolation-level"></span><h2>Transaction Isolation Level / Autocommit<a class="headerlink" href="#transaction-isolation-level-autocommit" title="Link to this heading">¶</a></h2>
<p>Oracle Database supports “READ COMMITTED” and “SERIALIZABLE” modes of
isolation. The AUTOCOMMIT isolation level is also supported by the
python-oracledb and cx_Oracle dialects.</p>
<p>To set using per-connection execution options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">connection</span> <span class="o">=</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">connection</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">execution_options</span><span class="p">(</span><span class="n">isolation_level</span><span class="o">=</span><span class="s2">&quot;AUTOCOMMIT&quot;</span><span class="p">)</span></pre></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">READ</span> <span class="pre">COMMITTED</span></code> and <code class="docutils literal notranslate"><span class="pre">SERIALIZABLE</span></code>, the Oracle Database dialects sets
the level at the session level using <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">SESSION</span></code>, which is reverted back
to its default setting when the connection is returned to the connection pool.</p>
<p>Valid values for <code class="docutils literal notranslate"><span class="pre">isolation_level</span></code> include:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">READ</span> <span class="pre">COMMITTED</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AUTOCOMMIT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SERIALIZABLE</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The implementation for the
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a> method as implemented by the
Oracle Database dialects necessarily force the start of a transaction using the
Oracle Database DBMS_TRANSACTION.LOCAL_TRANSACTION_ID function; otherwise no
level is normally readable.</p>
<p>Additionally, the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a> method will
raise an exception if the <code class="docutils literal notranslate"><span class="pre">v$transaction</span></code> view is not available due to
permissions or other reasons, which is a common occurrence in Oracle Database
installations.</p>
<p>The python-oracledb and cx_Oracle dialects attempt to call the
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a> method when the dialect makes
its first connection to the database in order to acquire the
“default”isolation level.  This default level is necessary so that the level
can be reset on a connection after it has been temporarily modified using
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.execution_options" title="sqlalchemy.engine.Connection.execution_options"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.execution_options()</span></code></a> method.  In the common event
that the <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.get_isolation_level" title="sqlalchemy.engine.Connection.get_isolation_level"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.get_isolation_level()</span></code></a> method raises an
exception due to <code class="docutils literal notranslate"><span class="pre">v$transaction</span></code> not being readable as well as any other
database-related failure, the level is assumed to be “READ COMMITTED”.  No
warning is emitted for this initial first-connect condition as it is
expected to be a common restriction on Oracle databases.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.16: </span>added support for AUTOCOMMIT to the cx_Oracle dialect
as well as the notion of a default isolation level</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.21: </span>Added support for SERIALIZABLE as well as live
reading of the isolation level.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.3.22: </span>In the event that the default isolation
level cannot be read due to permissions on the v$transaction view as
is common in Oracle installations, the default isolation level is hardcoded
to “READ COMMITTED” which was the behavior prior to 1.3.21.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../core/connections.html#dbapi-autocommit"><span class="std std-ref">Setting Transaction Isolation Levels including DBAPI Autocommit</span></a></p>
</div>
</section>
<section id="identifier-casing">
<h2>Identifier Casing<a class="headerlink" href="#identifier-casing" title="Link to this heading">¶</a></h2>
<p>In Oracle Database, the data dictionary represents all case insensitive
identifier names using UPPERCASE text.  This is in contradiction to the
expectations of SQLAlchemy, which assume a case insensitive name is represented
as lowercase text.</p>
<p>As an example of case insensitive identifier names, consider the following table:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">MyTable</span><span class="w"> </span><span class="p">(</span><span class="n">Identifier</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">)</span></pre></div>
</div>
<p>If you were to ask Oracle Database for information about this table, the
table name would be reported as <code class="docutils literal notranslate"><span class="pre">MYTABLE</span></code> and the column name would
be reported as <code class="docutils literal notranslate"><span class="pre">IDENTIFIER</span></code>.    Compare to most other databases such as
PostgreSQL and MySQL which would report these names as <code class="docutils literal notranslate"><span class="pre">mytable</span></code> and
<code class="docutils literal notranslate"><span class="pre">identifier</span></code>.   The names are <strong>not quoted, therefore are case insensitive</strong>.
The special casing of <code class="docutils literal notranslate"><span class="pre">MyTable</span></code> and <code class="docutils literal notranslate"><span class="pre">Identifier</span></code> would only be maintained
if they were quoted in the table definition:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="ss">&quot;MyTable&quot;</span><span class="w"> </span><span class="p">(</span><span class="ss">&quot;Identifier&quot;</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">)</span></pre></div>
</div>
<p>When constructing a SQLAlchemy <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> object, <strong>an all lowercase name
is considered to be case insensitive</strong>.   So the following table assumes
case insensitive names:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;identifier&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span></pre></div>
</div>
<p>Whereas when mixed case or UPPERCASE names are used, case sensitivity is
assumed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;MyTable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;Identifier&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">,</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span></pre></div>
</div>
<p>A similar situation occurs at the database driver level when emitting a
textual SQL SELECT statement and looking at column names in the DBAPI
<code class="docutils literal notranslate"><span class="pre">cursor.description</span></code> attribute.  A database like PostgreSQL will normalize
case insensitive names to be lowercase:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pg_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;postgresql://scott:tiger@localhost/test&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pg_connection</span> <span class="o">=</span> <span class="n">pg_engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">pg_connection</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span><span class="s2">&quot;SELECT 1 AS SomeName&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">description</span>
<span class="go">(Column(name=&#39;somename&#39;, type_code=23),)</span></pre></div>
</div>
<p>Whereas Oracle normalizes them to UPPERCASE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">oracle_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+oracledb://scott:tiger@oracle18c/xe&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oracle_connection</span> <span class="o">=</span> <span class="n">oracle_engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">oracle_connection</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;SELECT 1 AS SomeName FROM DUAL&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">description</span>
<span class="go">[(&#39;SOMENAME&#39;, &lt;DbType DB_TYPE_NUMBER&gt;, 127, None, 0, -127, True)]</span></pre></div>
</div>
<p>In order to achieve cross-database parity for the two cases of a. table
reflection and b. textual-only SQL statement round trips, SQLAlchemy performs a step
called <strong>name normalization</strong> when using the Oracle dialect.  This process may
also apply to other third party dialects that have similar UPPERCASE handling
of case insensitive names.</p>
<p>When using name normalization, SQLAlchemy attempts to detect if a name is
case insensitive by checking if all characters are UPPERCASE letters only;
if so, then it assumes this is a case insensitive name and is delivered as
a lowercase name.</p>
<p>For table reflection, a tablename that is seen represented as all UPPERCASE
in Oracle Database’s catalog tables will be assumed to have a case insensitive
name.  This is what allows the <code class="docutils literal notranslate"><span class="pre">Table</span></code> definition to use lower case names
and be equally compatible from a reflection point of view on Oracle Database
and all other databases such as PostgreSQL and MySQL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># matches a table created with CREATE TABLE mytable</span>
<span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">autoload_with</span><span class="o">=</span><span class="n">some_engine</span><span class="p">)</span></pre></div>
</div>
<p>Above, the all lowercase name <code class="docutils literal notranslate"><span class="pre">&quot;mytable&quot;</span></code> is case insensitive; it will match
a table reported by PostgreSQL as <code class="docutils literal notranslate"><span class="pre">&quot;mytable&quot;</span></code> and a table reported by
Oracle as <code class="docutils literal notranslate"><span class="pre">&quot;MYTABLE&quot;</span></code>.  If name normalization were not present, it would
not be possible for the above <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> definition to be introspectable
in a cross-database way, since we are dealing with a case insensitive name
that is not reported by each database in the same way.</p>
<p>Case sensitivity can be forced on in this case, such as if we wanted to represent
the quoted tablename <code class="docutils literal notranslate"><span class="pre">&quot;MYTABLE&quot;</span></code> with that exact casing, most simply by using
that casing directly, which will be seen as a case sensitive name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># matches a table created with CREATE TABLE &quot;MYTABLE&quot;</span>
<span class="n">Table</span><span class="p">(</span><span class="s2">&quot;MYTABLE&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">autoload_with</span><span class="o">=</span><span class="n">some_engine</span><span class="p">)</span></pre></div>
</div>
<p>For the unusual case of a quoted all-lowercase name, the <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.quoted_name" title="sqlalchemy.sql.expression.quoted_name"><code class="xref py py-class docutils literal notranslate"><span class="pre">quoted_name</span></code></a>
construct may be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">quoted_name</span>

<span class="c1"># matches a table created with CREATE TABLE &quot;mytable&quot;</span>
<span class="n">Table</span><span class="p">(</span>
    <span class="n">quoted_name</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">quote</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">autoload_with</span><span class="o">=</span><span class="n">some_engine</span>
<span class="p">)</span></pre></div>
</div>
<p>Name normalization also takes place when handling result sets from <strong>purely
textual SQL strings</strong>, that have no other <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> or <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a>
metadata associated with them. This includes SQL strings executed using
<a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.exec_driver_sql" title="sqlalchemy.engine.Connection.exec_driver_sql"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.exec_driver_sql()</span></code></a> and SQL strings executed using the
<a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.text" title="sqlalchemy.sql.expression.text"><code class="xref py py-func docutils literal notranslate"><span class="pre">text()</span></code></a> construct which do not include <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> metadata.</p>
<p>Returning to the Oracle Database SELECT statement, we see that even though
<code class="docutils literal notranslate"><span class="pre">cursor.description</span></code> reports the column name as <code class="docutils literal notranslate"><span class="pre">SOMENAME</span></code>, SQLAlchemy
name normalizes this to <code class="docutils literal notranslate"><span class="pre">somename</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">oracle_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+oracledb://scott:tiger@oracle18c/xe&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oracle_connection</span> <span class="o">=</span> <span class="n">oracle_engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">oracle_connection</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s2">&quot;SELECT 1 AS SomeName FROM DUAL&quot;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">description</span>
<span class="go">[(&#39;SOMENAME&#39;, &lt;DbType DB_TYPE_NUMBER&gt;, 127, None, 0, -127, True)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">RMKeyView([&#39;somename&#39;])</span></pre></div>
</div>
<p>The single scenario where the above behavior produces inaccurate results
is when using an all-uppercase, quoted name.  SQLAlchemy has no way to determine
that a particular name in <code class="docutils literal notranslate"><span class="pre">cursor.description</span></code> was quoted, and is therefore
case sensitive, or was not quoted, and should be name normalized:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">oracle_connection</span><span class="o">.</span><span class="n">exec_driver_sql</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;SELECT 1 AS &quot;SOMENAME&quot; FROM DUAL&#39;</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">cursor</span><span class="o">.</span><span class="n">description</span>
<span class="go">[(&#39;SOMENAME&#39;, &lt;DbType DB_TYPE_NUMBER&gt;, 127, None, 0, -127, True)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">RMKeyView([&#39;somename&#39;])</span></pre></div>
</div>
<p>For this case, a new feature will be available in SQLAlchemy 2.1 to disable
the name normalization behavior in specific cases.</p>
</section>
<section id="maximum-identifier-lengths">
<span id="oracle-max-identifier-lengths"></span><h2>Maximum Identifier Lengths<a class="headerlink" href="#maximum-identifier-lengths" title="Link to this heading">¶</a></h2>
<p>SQLAlchemy is sensitive to the maximum identifier length supported by Oracle
Database. This affects generated SQL label names as well as the generation of
constraint names, particularly in the case where the constraint naming
convention feature described at <a class="reference internal" href="../core/constraints.html#constraint-naming-conventions"><span class="std std-ref">Configuring Constraint Naming Conventions</span></a> is being
used.</p>
<p>Oracle Database 12.2 increased the default maximum identifier length from 30 to
128. As of SQLAlchemy 1.4, the default maximum identifier length for the Oracle
dialects is 128 characters.  Upon first connection, the maximum length actually
supported by the database is obtained. In all cases, setting the
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.max_identifier_length" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.max_identifier_length</span></code></a> parameter will bypass this
change and the value given will be used as is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@localhost:1521?service_name=freepdb1&quot;</span><span class="p">,</span>
    <span class="n">max_identifier_length</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<p>If <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.max_identifier_length" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.max_identifier_length</span></code></a> is not set, the oracledb
dialect internally uses the <code class="docutils literal notranslate"><span class="pre">max_identifier_length</span></code> attribute available on
driver connections since python-oracledb version 2.5. When using an older
driver version, or using the cx_Oracle dialect, SQLAlchemy will instead attempt
to use the query <code class="docutils literal notranslate"><span class="pre">SELECT</span> <span class="pre">value</span> <span class="pre">FROM</span> <span class="pre">v$parameter</span> <span class="pre">WHERE</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">'compatible'</span></code>
upon first connect in order to determine the effective compatibility version of
the database. The “compatibility” version is a version number that is
independent of the actual database version. It is used to assist database
migration. It is configured by an Oracle Database initialization parameter. The
compatibility version then determines the maximum allowed identifier length for
the database. If the V$ view is not available, the database version information
is used instead.</p>
<p>The maximum identifier length comes into play both when generating anonymized
SQL labels in SELECT statements, but more crucially when generating constraint
names from a naming convention.  It is this area that has created the need for
SQLAlchemy to change this default conservatively.  For example, the following
naming convention produces two very different constraint names based on the
identifier length:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Index</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Integer</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">MetaData</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Table</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">oracle</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.schema</span> <span class="kn">import</span> <span class="n">CreateIndex</span>

<span class="n">m</span> <span class="o">=</span> <span class="n">MetaData</span><span class="p">(</span><span class="n">naming_convention</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ix&quot;</span><span class="p">:</span> <span class="s2">&quot;ix_</span><span class="si">%(column_0N_name)s</span><span class="s2">&quot;</span><span class="p">})</span>

<span class="n">t</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;t&quot;</span><span class="p">,</span>
    <span class="n">m</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;some_column_name_1&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;some_column_name_2&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
    <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;some_column_name_3&quot;</span><span class="p">,</span> <span class="n">Integer</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">ix</span> <span class="o">=</span> <span class="n">Index</span><span class="p">(</span>
    <span class="kc">None</span><span class="p">,</span>
    <span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">some_column_name_1</span><span class="p">,</span>
    <span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">some_column_name_2</span><span class="p">,</span>
    <span class="n">t</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">some_column_name_3</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">oracle_dialect</span> <span class="o">=</span> <span class="n">oracle</span><span class="o">.</span><span class="n">dialect</span><span class="p">(</span><span class="n">max_identifier_length</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="n">print</span><span class="p">(</span><span class="n">CreateIndex</span><span class="p">(</span><span class="n">ix</span><span class="p">)</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="n">oracle_dialect</span><span class="p">))</span></pre></div>
</div>
<p>With an identifier length of 30, the above CREATE INDEX looks like:</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">INDEX</span><span class="w"> </span><span class="n">ix_some_column_name_1s_70cd</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">t</span>
<span class="p">(</span><span class="n">some_column_name_1</span><span class="p">,</span><span class="w"> </span><span class="n">some_column_name_2</span><span class="p">,</span><span class="w"> </span><span class="n">some_column_name_3</span><span class="p">)</span></pre></div>
</div>
<p>However with length of 128, it becomes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">..</span> <span class="n">sourcecode</span><span class="p">::</span> <span class="n">sql</span></pre></div>
</div>
<blockquote>
<div><p>CREATE INDEX ix_some_column_name_1some_column_name_2some_column_name_3 ON t
(some_column_name_1, some_column_name_2, some_column_name_3)</p>
</div></blockquote>
<p>Applications which have run versions of SQLAlchemy prior to 1.4 on Oracle
Database version 12.2 or greater are therefore subject to the scenario of a
database migration that wishes to “DROP CONSTRAINT” on a name that was
previously generated with the shorter length.  This migration will fail when
the identifier length is changed without the name of the index or constraint
first being adjusted.  Such applications are strongly advised to make use of
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.max_identifier_length" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.max_identifier_length</span></code></a> in order to maintain
control of the generation of truncated names, and to fully review and test all
database migrations in a staging environment when changing this value to ensure
that the impact of this change has been mitigated.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>the default max_identifier_length for Oracle Database
is 128 characters, which is adjusted down to 30 upon first connect if the
Oracle Database, or its compatibility setting, are lower than version 12.2.</p>
</div>
</section>
<section id="limit-offset-fetch-support">
<h2>LIMIT/OFFSET/FETCH Support<a class="headerlink" href="#limit-offset-fetch-support" title="Link to this heading">¶</a></h2>
<p>Methods like <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.limit" title="sqlalchemy.sql.expression.Select.limit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.limit()</span></code></a> and <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.offset" title="sqlalchemy.sql.expression.Select.offset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.offset()</span></code></a> make use
of <code class="docutils literal notranslate"><span class="pre">FETCH</span> <span class="pre">FIRST</span> <span class="pre">N</span> <span class="pre">ROW</span> <span class="pre">/</span> <span class="pre">OFFSET</span> <span class="pre">N</span> <span class="pre">ROWS</span></code> syntax assuming Oracle Database 12c or
above, and assuming the SELECT statement is not embedded within a compound
statement like UNION.  This syntax is also available directly by using the
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.fetch" title="sqlalchemy.sql.expression.Select.fetch"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.fetch()</span></code></a> method.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>the Oracle Database dialects now use <code class="docutils literal notranslate"><span class="pre">FETCH</span> <span class="pre">FIRST</span> <span class="pre">N</span>
<span class="pre">ROW</span> <span class="pre">/</span> <span class="pre">OFFSET</span> <span class="pre">N</span> <span class="pre">ROWS</span></code> for all <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.limit" title="sqlalchemy.sql.expression.Select.limit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.limit()</span></code></a> and
<a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.offset" title="sqlalchemy.sql.expression.Select.offset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.offset()</span></code></a> usage including within the ORM and legacy
<a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query" title="sqlalchemy.orm.Query"><code class="xref py py-class docutils literal notranslate"><span class="pre">Query</span></code></a>.  To force the legacy behavior using window functions,
specify the <code class="docutils literal notranslate"><span class="pre">enable_offset_fetch=False</span></code> dialect parameter to
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p>
</div>
<p>The use of <code class="docutils literal notranslate"><span class="pre">FETCH</span> <span class="pre">FIRST</span> <span class="pre">/</span> <span class="pre">OFFSET</span></code> may be disabled on any Oracle Database
version by passing <code class="docutils literal notranslate"><span class="pre">enable_offset_fetch=False</span></code> to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>,
which will force the use of “legacy” mode that makes use of window functions.
This mode is also selected automatically when using a version of Oracle
Database prior to 12c.</p>
<p>When using legacy mode, or when a <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select" title="sqlalchemy.sql.expression.Select"><code class="xref py py-class docutils literal notranslate"><span class="pre">Select</span></code></a> statement with limit/offset
is embedded in a compound statement, an emulated approach for LIMIT / OFFSET
based on window functions is used, which involves creation of a subquery using
<code class="docutils literal notranslate"><span class="pre">ROW_NUMBER</span></code> that is prone to performance issues as well as SQL construction
issues for complex statements. However, this approach is supported by all
Oracle Database versions. See notes below.</p>
<section id="notes-on-limit-offset-emulation-when-fetch-method-cannot-be-used">
<h3>Notes on LIMIT / OFFSET emulation (when fetch() method cannot be used)<a class="headerlink" href="#notes-on-limit-offset-emulation-when-fetch-method-cannot-be-used" title="Link to this heading">¶</a></h3>
<p>If using <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.limit" title="sqlalchemy.sql.expression.Select.limit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.limit()</span></code></a> and <a class="reference internal" href="../core/selectable.html#sqlalchemy.sql.expression.Select.offset" title="sqlalchemy.sql.expression.Select.offset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Select.offset()</span></code></a>, or with the
ORM the <a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query.limit" title="sqlalchemy.orm.Query.limit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.limit()</span></code></a> and <a class="reference internal" href="../orm/queryguide/query.html#sqlalchemy.orm.Query.offset" title="sqlalchemy.orm.Query.offset"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Query.offset()</span></code></a> methods on an
Oracle Database version prior to 12c, the following notes apply:</p>
<ul>
<li><p>SQLAlchemy currently makes use of ROWNUM to achieve
LIMIT/OFFSET; the exact methodology is taken from
<a class="reference external" href="https://blogs.oracle.com/oraclemagazine/on-rownum-and-limiting-results">https://blogs.oracle.com/oraclemagazine/on-rownum-and-limiting-results</a> .</p></li>
<li><p>the “FIRST_ROWS()” optimization keyword is not used by default.  To enable
the usage of this optimization directive, specify <code class="docutils literal notranslate"><span class="pre">optimize_limits=True</span></code>
to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4: </span>The Oracle Database dialect renders limit/offset integer values using a
“post compile” scheme which renders the integer directly before passing
the statement to the cursor for execution.  The <code class="docutils literal notranslate"><span class="pre">use_binds_for_limits</span></code>
flag no longer has an effect.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="../changelog/migration_14.html#change-4808"><span class="std std-ref">New “post compile” bound parameters used for LIMIT/OFFSET in Oracle, SQL Server</span></a>.</p>
</div>
</div>
</li>
</ul>
</section>
</section>
<section id="returning-support">
<span id="oracle-returning"></span><h2>RETURNING Support<a class="headerlink" href="#returning-support" title="Link to this heading">¶</a></h2>
<p>Oracle Database supports RETURNING fully for INSERT, UPDATE and DELETE
statements that are invoked with a single collection of bound parameters (that
is, a <code class="docutils literal notranslate"><span class="pre">cursor.execute()</span></code> style statement; SQLAlchemy does not generally
support RETURNING with <a class="reference internal" href="../glossary.html#term-executemany"><span class="xref std std-term">executemany</span></a> statements).  Multiple rows may be
returned as well.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0: </span>the Oracle Database backend has full support for
RETURNING on parity with other backends.</p>
</div>
</section>
<section id="on-update-cascade">
<h2>ON UPDATE CASCADE<a class="headerlink" href="#on-update-cascade" title="Link to this heading">¶</a></h2>
<p>Oracle Database doesn’t have native ON UPDATE CASCADE functionality.  A trigger
based solution is available at
<a class="reference external" href="https://web.archive.org/web/20090317041251/https://asktom.oracle.com/tkyte/update_cascade/index.html">https://web.archive.org/web/20090317041251/https://asktom.oracle.com/tkyte/update_cascade/index.html</a></p>
<p>When using the SQLAlchemy ORM, the ORM has limited ability to manually issue
cascading updates - specify ForeignKey objects using the
“deferrable=True, initially=’deferred’” keyword arguments,
and specify “passive_updates=False” on each relationship().</p>
</section>
<section id="oracle-database-8-compatibility">
<h2>Oracle Database 8 Compatibility<a class="headerlink" href="#oracle-database-8-compatibility" title="Link to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The status of Oracle Database 8 compatibility is not known for
SQLAlchemy 2.0.</p>
</div>
<p>When Oracle Database 8 is detected, the dialect internally configures itself to
the following behaviors:</p>
<ul class="simple">
<li><p>the use_ansi flag is set to False.  This has the effect of converting all
JOIN phrases into the WHERE clause, and in the case of LEFT OUTER JOIN
makes use of Oracle’s (+) operator.</p></li>
<li><p>the NVARCHAR2 and NCLOB datatypes are no longer generated as DDL when
the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> is used - VARCHAR2 and CLOB are issued
instead. This because these types don’t seem to work correctly on Oracle 8
even though they are available. The <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.NVARCHAR" title="sqlalchemy.types.NVARCHAR"><code class="xref py py-class docutils literal notranslate"><span class="pre">NVARCHAR</span></code></a> and
<a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB" title="sqlalchemy.dialects.oracle.NCLOB"><code class="xref py py-class docutils literal notranslate"><span class="pre">NCLOB</span></code></a> types will always generate
NVARCHAR2 and NCLOB.</p></li>
</ul>
</section>
<section id="synonym-dblink-reflection">
<h2>Synonym/DBLINK Reflection<a class="headerlink" href="#synonym-dblink-reflection" title="Link to this heading">¶</a></h2>
<p>When using reflection with Table objects, the dialect can optionally search
for tables indicated by synonyms, either in local or remote schemas or
accessed over DBLINK, by passing the flag <code class="docutils literal notranslate"><span class="pre">oracle_resolve_synonyms=True</span></code> as
a keyword argument to the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> construct:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">some_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">autoload_with</span><span class="o">=</span><span class="n">some_engine</span><span class="p">,</span> <span class="n">oracle_resolve_synonyms</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span></pre></div>
</div>
<p>When this flag is set, the given name (such as <code class="docutils literal notranslate"><span class="pre">some_table</span></code> above) will be
searched not just in the <code class="docutils literal notranslate"><span class="pre">ALL_TABLES</span></code> view, but also within the
<code class="docutils literal notranslate"><span class="pre">ALL_SYNONYMS</span></code> view to see if this name is actually a synonym to another
name.  If the synonym is located and refers to a DBLINK, the Oracle Database
dialects know how to locate the table’s information using DBLINK syntax(e.g.
<code class="docutils literal notranslate"><span class="pre">&#64;dblink</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">oracle_resolve_synonyms</span></code> is accepted wherever reflection arguments are
accepted, including methods such as <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.reflect()</span></code></a> and
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_columns" title="sqlalchemy.engine.reflection.Inspector.get_columns"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_columns()</span></code></a>.</p>
<p>If synonyms are not in use, this flag should be left disabled.</p>
</section>
<section id="constraint-reflection">
<span id="oracle-constraint-reflection"></span><h2>Constraint Reflection<a class="headerlink" href="#constraint-reflection" title="Link to this heading">¶</a></h2>
<p>The Oracle Database dialects can return information about foreign key, unique,
and CHECK constraints, as well as indexes on tables.</p>
<p>Raw information regarding these constraints can be acquired using
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_foreign_keys" title="sqlalchemy.engine.reflection.Inspector.get_foreign_keys"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_foreign_keys()</span></code></a>,
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_unique_constraints" title="sqlalchemy.engine.reflection.Inspector.get_unique_constraints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_unique_constraints()</span></code></a>,
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_check_constraints" title="sqlalchemy.engine.reflection.Inspector.get_check_constraints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_check_constraints()</span></code></a>, and
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_indexes" title="sqlalchemy.engine.reflection.Inspector.get_indexes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_indexes()</span></code></a>.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.2: </span>The Oracle Database dialect can now reflect UNIQUE and
CHECK constraints.</p>
</div>
<p>When using reflection at the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> level, the
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>
will also include these constraints.</p>
<p>Note the following caveats:</p>
<ul>
<li><p>When using the <a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_check_constraints" title="sqlalchemy.engine.reflection.Inspector.get_check_constraints"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_check_constraints()</span></code></a> method,
Oracle Database builds a special “IS NOT NULL” constraint for columns that
specify “NOT NULL”.  This constraint is <strong>not</strong> returned by default; to
include the “IS NOT NULL” constraints, pass the flag <code class="docutils literal notranslate"><span class="pre">include_all=True</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">inspect</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@localhost:1521?service_name=freepdb1&quot;</span>
<span class="p">)</span>
<span class="n">inspector</span> <span class="o">=</span> <span class="n">inspect</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<span class="n">all_check_constraints</span> <span class="o">=</span> <span class="n">inspector</span><span class="o">.</span><span class="n">get_check_constraints</span><span class="p">(</span>
    <span class="s2">&quot;some_table&quot;</span><span class="p">,</span> <span class="n">include_all</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span></pre></div>
</div>
</li>
<li><p>in most cases, when reflecting a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a>, a UNIQUE constraint
will <strong>not</strong> be available as a <a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.UniqueConstraint" title="sqlalchemy.schema.UniqueConstraint"><code class="xref py py-class docutils literal notranslate"><span class="pre">UniqueConstraint</span></code></a> object, as Oracle
Database mirrors unique constraints with a UNIQUE index in most cases (the
exception seems to be when two or more unique constraints represent the same
columns); the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> will instead represent these using
<a class="reference internal" href="../core/constraints.html#sqlalchemy.schema.Index" title="sqlalchemy.schema.Index"><code class="xref py py-class docutils literal notranslate"><span class="pre">Index</span></code></a> with the <code class="docutils literal notranslate"><span class="pre">unique=True</span></code> flag set.</p></li>
<li><p>Oracle Database creates an implicit index for the primary key of a table;
this index is <strong>excluded</strong> from all index results.</p></li>
<li><p>the list of columns reflected for an index will not include column names
that start with SYS_NC.</p></li>
</ul>
</section>
<section id="table-names-with-system-sysaux-tablespaces">
<h2>Table names with SYSTEM/SYSAUX tablespaces<a class="headerlink" href="#table-names-with-system-sysaux-tablespaces" title="Link to this heading">¶</a></h2>
<p>The <a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_table_names" title="sqlalchemy.engine.reflection.Inspector.get_table_names"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_table_names()</span></code></a> and
<a class="reference internal" href="../core/reflection.html#sqlalchemy.engine.reflection.Inspector.get_temp_table_names" title="sqlalchemy.engine.reflection.Inspector.get_temp_table_names"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Inspector.get_temp_table_names()</span></code></a>
methods each return a list of table names for the current engine. These methods
are also part of the reflection which occurs within an operation such as
<a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.MetaData.reflect" title="sqlalchemy.schema.MetaData.reflect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">MetaData.reflect()</span></code></a>.  By default,
these operations exclude the <code class="docutils literal notranslate"><span class="pre">SYSTEM</span></code>
and <code class="docutils literal notranslate"><span class="pre">SYSAUX</span></code> tablespaces from the operation.   In order to change this, the
default list of tablespaces excluded can be changed at the engine level using
the <code class="docutils literal notranslate"><span class="pre">exclude_tablespaces</span></code> parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># exclude SYSAUX and SOME_TABLESPACE, but not SYSTEM</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@localhost:1521/?service_name=freepdb1&quot;</span><span class="p">,</span>
    <span class="n">exclude_tablespaces</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;SYSAUX&quot;</span><span class="p">,</span> <span class="s2">&quot;SOME_TABLESPACE&quot;</span><span class="p">],</span>
<span class="p">)</span></pre></div>
</div>
</section>
<section id="float-double-support-and-behaviors">
<span id="oracle-float-support"></span><h2>FLOAT / DOUBLE Support and Behaviors<a class="headerlink" href="#float-double-support-and-behaviors" title="Link to this heading">¶</a></h2>
<p>The SQLAlchemy <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Double" title="sqlalchemy.types.Double"><code class="xref py py-class docutils literal notranslate"><span class="pre">Double</span></code></a> datatypes are generic
datatypes that resolve to the “least surprising” datatype for a given backend.
For Oracle Database, this means they resolve to the <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> and <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code>
types:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">cast</span><span class="p">,</span> <span class="n">literal</span><span class="p">,</span> <span class="n">Float</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">oracle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">float_datatype</span> <span class="o">=</span> <span class="n">Float</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">literal</span><span class="p">(</span><span class="mf">5.0</span><span class="p">),</span> <span class="n">float_datatype</span><span class="p">)</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="n">oracle</span><span class="o">.</span><span class="n">dialect</span><span class="p">()))</span>
<span class="go">CAST(:param_1 AS FLOAT)</span></pre></div>
</div>
<p>Oracle’s <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> / <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> datatypes are aliases for <code class="docutils literal notranslate"><span class="pre">NUMBER</span></code>.   Oracle
Database stores <code class="docutils literal notranslate"><span class="pre">NUMBER</span></code> values with full precision, not floating point
precision, which means that <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> / <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> do not actually behave like
native FP values. Oracle Database instead offers special datatypes
<code class="docutils literal notranslate"><span class="pre">BINARY_FLOAT</span></code> and <code class="docutils literal notranslate"><span class="pre">BINARY_DOUBLE</span></code> to deliver real 4- and 8- byte FP
values.</p>
<p>SQLAlchemy supports these datatypes directly using <a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT" title="sqlalchemy.dialects.oracle.BINARY_FLOAT"><code class="xref py py-class docutils literal notranslate"><span class="pre">BINARY_FLOAT</span></code></a> and
<a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE" title="sqlalchemy.dialects.oracle.BINARY_DOUBLE"><code class="xref py py-class docutils literal notranslate"><span class="pre">BINARY_DOUBLE</span></code></a>.   To use the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> or <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Double" title="sqlalchemy.types.Double"><code class="xref py py-class docutils literal notranslate"><span class="pre">Double</span></code></a>
datatypes in a database agnostic way, while allowing Oracle backends to utilize
one of these types, use the <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.with_variant()</span></code></a> method to set up a
variant:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">cast</span><span class="p">,</span> <span class="n">literal</span><span class="p">,</span> <span class="n">Float</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">oracle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">float_datatype</span> <span class="o">=</span> <span class="n">Float</span><span class="p">()</span><span class="o">.</span><span class="n">with_variant</span><span class="p">(</span><span class="n">oracle</span><span class="o">.</span><span class="n">BINARY_FLOAT</span><span class="p">(),</span> <span class="s2">&quot;oracle&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="n">literal</span><span class="p">(</span><span class="mf">5.0</span><span class="p">),</span> <span class="n">float_datatype</span><span class="p">)</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">dialect</span><span class="o">=</span><span class="n">oracle</span><span class="o">.</span><span class="n">dialect</span><span class="p">()))</span>
<span class="go">CAST(:param_1 AS BINARY_FLOAT)</span></pre></div>
</div>
<p>E.g. to use this datatype in a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> definition:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_table</span> <span class="o">=</span> <span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;my_table&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="n">Column</span><span class="p">(</span>
        <span class="s2">&quot;fp_data&quot;</span><span class="p">,</span> <span class="n">Float</span><span class="p">()</span><span class="o">.</span><span class="n">with_variant</span><span class="p">(</span><span class="n">oracle</span><span class="o">.</span><span class="n">BINARY_FLOAT</span><span class="p">(),</span> <span class="s2">&quot;oracle&quot;</span><span class="p">)</span>
    <span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
</section>
<section id="datetime-compatibility">
<h2>DateTime Compatibility<a class="headerlink" href="#datetime-compatibility" title="Link to this heading">¶</a></h2>
<p>Oracle Database has no datatype known as <code class="docutils literal notranslate"><span class="pre">DATETIME</span></code>, it instead has only
<code class="docutils literal notranslate"><span class="pre">DATE</span></code>, which can actually store a date and time value.  For this reason, the
Oracle Database dialects provide a type <a class="reference internal" href="#sqlalchemy.dialects.oracle.DATE" title="sqlalchemy.dialects.oracle.DATE"><code class="xref py py-class docutils literal notranslate"><span class="pre">DATE</span></code></a> which is a
subclass of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTime</span></code></a>.  This type has no special behavior, and is only
present as a “marker” for this type; additionally, when a database column is
reflected and the type is reported as <code class="docutils literal notranslate"><span class="pre">DATE</span></code>, the time-supporting
<a class="reference internal" href="#sqlalchemy.dialects.oracle.DATE" title="sqlalchemy.dialects.oracle.DATE"><code class="xref py py-class docutils literal notranslate"><span class="pre">DATE</span></code></a> type is used.</p>
</section>
<section id="oracle-database-table-options">
<span id="oracle-table-options"></span><h2>Oracle Database Table Options<a class="headerlink" href="#oracle-database-table-options" title="Link to this heading">¶</a></h2>
<p>The CREATE TABLE phrase supports the following options with Oracle Database
dialects in conjunction with the <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Table" title="sqlalchemy.schema.Table"><code class="xref py py-class docutils literal notranslate"><span class="pre">Table</span></code></a> construct:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ON</span> <span class="pre">COMMIT</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;some_table&quot;</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">,</span>
    <span class="o">...</span><span class="p">,</span>
    <span class="n">prefixes</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;GLOBAL TEMPORARY&quot;</span><span class="p">],</span>
    <span class="n">oracle_on_commit</span><span class="o">=</span><span class="s2">&quot;PRESERVE ROWS&quot;</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">COMPRESS</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span>
    <span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">32</span><span class="p">)),</span> <span class="n">oracle_compress</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="n">Column</span><span class="p">(</span><span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="mi">32</span><span class="p">)),</span> <span class="n">oracle_compress</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">oracle_compress</span></code> parameter accepts either an integer compression
level, or <code class="docutils literal notranslate"><span class="pre">True</span></code> to use the default compression level.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">TABLESPACE</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Table</span><span class="p">(</span><span class="s2">&quot;mytable&quot;</span><span class="p">,</span> <span class="n">metadata</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">oracle_tablespace</span><span class="o">=</span><span class="s2">&quot;EXAMPLE_TABLESPACE&quot;</span><span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">oracle_tablespace</span></code> parameter specifies the tablespace in which the
table is to be created. This is useful when you want to create a table in a
tablespace other than the default tablespace of the user.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.37.</span></p>
</div>
</li>
</ul>
</section>
<section id="oracle-database-specific-index-options">
<span id="oracle-index-options"></span><h2>Oracle Database Specific Index Options<a class="headerlink" href="#oracle-database-specific-index-options" title="Link to this heading">¶</a></h2>
<section id="bitmap-indexes">
<h3>Bitmap Indexes<a class="headerlink" href="#bitmap-indexes" title="Link to this heading">¶</a></h3>
<p>You can specify the <code class="docutils literal notranslate"><span class="pre">oracle_bitmap</span></code> parameter to create a bitmap index
instead of a B-tree index:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s2">&quot;my_index&quot;</span><span class="p">,</span> <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">oracle_bitmap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></pre></div>
</div>
<p>Bitmap indexes cannot be unique and cannot be compressed. SQLAlchemy will not
check for such limitations, only the database will.</p>
</section>
<section id="index-compression">
<h3>Index compression<a class="headerlink" href="#index-compression" title="Link to this heading">¶</a></h3>
<p>Oracle Database has a more efficient storage mode for indexes containing lots
of repeated values. Use the <code class="docutils literal notranslate"><span class="pre">oracle_compress</span></code> parameter to turn on key
compression:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Index</span><span class="p">(</span><span class="s2">&quot;my_index&quot;</span><span class="p">,</span> <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">oracle_compress</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">Index</span><span class="p">(</span>
    <span class="s2">&quot;my_index&quot;</span><span class="p">,</span>
    <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data1</span><span class="p">,</span>
    <span class="n">my_table</span><span class="o">.</span><span class="n">c</span><span class="o">.</span><span class="n">data2</span><span class="p">,</span>
    <span class="n">unique</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">oracle_compress</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">oracle_compress</span></code> parameter accepts either an integer specifying the
number of prefix columns to compress, or <code class="docutils literal notranslate"><span class="pre">True</span></code> to use the default (all
columns for non-unique indexes, all but the last column for unique indexes).</p>
</section>
</section>
<section id="oracle-database-data-types">
<h2>Oracle Database Data Types<a class="headerlink" href="#oracle-database-data-types" title="Link to this heading">¶</a></h2>
<p>As with all SQLAlchemy dialects, all UPPERCASE types that are known to be valid
with Oracle Database are importable from the top level dialect, whether they
originate from <a class="reference internal" href="../core/type_basics.html#module-sqlalchemy.types" title="sqlalchemy.types"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sqlalchemy.types</span></code></a> or from the local dialect:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.dialects.oracle</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BFILE</span><span class="p">,</span>
    <span class="n">BLOB</span><span class="p">,</span>
    <span class="n">CHAR</span><span class="p">,</span>
    <span class="n">CLOB</span><span class="p">,</span>
    <span class="n">DATE</span><span class="p">,</span>
    <span class="n">DOUBLE_PRECISION</span><span class="p">,</span>
    <span class="n">FLOAT</span><span class="p">,</span>
    <span class="n">INTERVAL</span><span class="p">,</span>
    <span class="n">LONG</span><span class="p">,</span>
    <span class="n">NCLOB</span><span class="p">,</span>
    <span class="n">NCHAR</span><span class="p">,</span>
    <span class="n">NUMBER</span><span class="p">,</span>
    <span class="n">NVARCHAR</span><span class="p">,</span>
    <span class="n">NVARCHAR2</span><span class="p">,</span>
    <span class="n">RAW</span><span class="p">,</span>
    <span class="n">TIMESTAMP</span><span class="p">,</span>
    <span class="n">VARCHAR</span><span class="p">,</span>
    <span class="n">VARCHAR2</span><span class="p">,</span>
<span class="p">)</span></pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.19: </span>Added <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.NCHAR" title="sqlalchemy.types.NCHAR"><code class="xref py py-class docutils literal notranslate"><span class="pre">NCHAR</span></code></a> to the list of datatypes
exported by the Oracle dialect.</p>
</div>
<p>Types which are specific to Oracle Database, or have Oracle-specific
construction arguments, are as follows:</p>
<table class="longtable docutils align-default">
<thead>
<tr class="row-odd"><th class="head">Object Name</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.BFILE"><span class="sig-name descname">BFILE</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE"><span class="sig-name descname">BINARY_DOUBLE</span></a></p></td>
<td><p>Implement the Oracle <code class="docutils literal notranslate"><span class="pre">BINARY_DOUBLE</span></code> datatype.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT"><span class="sig-name descname">BINARY_FLOAT</span></a></p></td>
<td><p>Implement the Oracle <code class="docutils literal notranslate"><span class="pre">BINARY_FLOAT</span></code> datatype.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.DATE"><span class="sig-name descname">DATE</span></a></p></td>
<td><p>Provide the Oracle Database DATE type.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT"><span class="sig-name descname">FLOAT</span></a></p></td>
<td><p>Oracle Database FLOAT.</p></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.INTERVAL"><span class="sig-name descname">INTERVAL</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.LONG"><span class="sig-name descname">LONG</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB"><span class="sig-name descname">NCLOB</span></a></p></td>
<td></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.NUMBER"><span class="sig-name descname">NUMBER</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.NVARCHAR2"><span class="sig-name descname">NVARCHAR2</span></a></p></td>
<td><p>alias of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.NVARCHAR" title="sqlalchemy.sql.sqltypes.NVARCHAR"><code class="xref py py-class docutils literal notranslate"><span class="pre">NVARCHAR</span></code></a></p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.RAW"><span class="sig-name descname">RAW</span></a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.ROWID"><span class="sig-name descname">ROWID</span></a></p></td>
<td><p>Oracle Database ROWID type.</p></td>
</tr>
<tr class="row-even"><td class="autosummary-name"><p><a class="reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP"><span class="sig-name descname">TIMESTAMP</span></a></p></td>
<td><p>Oracle Database implementation of <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code>, which supports
additional Oracle Database-specific modes</p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.BFILE">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">BFILE</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.BFILE" title="Link to this definition">¶</a></dt>
<dd><div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.BFILE.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.BFILE" title="sqlalchemy.dialects.oracle.BFILE"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.BFILE</span></code></a> (<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.LargeBinary" title="sqlalchemy.types.LargeBinary"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.LargeBinary</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.BFILE.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.BFILE"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.BFILE.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.BFILE.__init__" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.types.LargeBinary.__init__</span></code> <em>method of</em> <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.LargeBinary" title="sqlalchemy.types.LargeBinary"><code class="xref py py-class docutils literal notranslate"><span class="pre">LargeBinary</span></code></a></p>
</div>
<p>Construct a LargeBinary type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.dialects.oracle.BFILE.params.length"></span><strong>length</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.BFILE.params.length">¶</a> – optional, a length for the column for use in
DDL statements, for those binary types that accept a length,
such as the MySQL BLOB type.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.BINARY_DOUBLE">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">BINARY_DOUBLE</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE" title="Link to this definition">¶</a></dt>
<dd><p>Implement the Oracle <code class="docutils literal notranslate"><span class="pre">BINARY_DOUBLE</span></code> datatype.</p>
<p>This datatype differs from the Oracle <code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code> datatype in that it
delivers a true 8-byte FP value.   The datatype may be combined with a
generic <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Double" title="sqlalchemy.types.Double"><code class="xref py py-class docutils literal notranslate"><span class="pre">Double</span></code></a> datatype using <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.with_variant()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#oracle-float-support"><span class="std std-ref">FLOAT / DOUBLE Support and Behaviors</span></a></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE" title="sqlalchemy.dialects.oracle.BINARY_DOUBLE"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.BINARY_DOUBLE</span></code></a> (<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Double" title="sqlalchemy.types.Double"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.Double</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.BINARY_DOUBLE.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.BINARY_DOUBLE.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asdecimal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimal_return_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE.__init__" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.types.Float.__init__</span></code> <em>method of</em> <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a></p>
</div>
<p>Construct a Float.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.dialects.oracle.BINARY_DOUBLE.params.precision"></span><strong>precision</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE.params.precision">¶</a> – <p>the numeric precision for use in DDL <code class="docutils literal notranslate"><span class="pre">CREATE</span>
<span class="pre">TABLE</span></code>. Backends <strong>should</strong> attempt to ensure this precision
indicates a number of digits for the generic
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the Oracle Database backend, the
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float.params.precision" title="sqlalchemy.types.Float"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Float.precision</span></code></a> parameter is not accepted
when rendering DDL, as Oracle Database does not support float precision
specified as a number of decimal places. Instead, use the
Oracle Database-specific <a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT" title="sqlalchemy.dialects.oracle.FLOAT"><code class="xref py py-class docutils literal notranslate"><span class="pre">FLOAT</span></code></a> datatype and specify the
<a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT.params.binary_precision" title="sqlalchemy.dialects.oracle.FLOAT"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">FLOAT.binary_precision</span></code></a> parameter. This is new
in version 2.0 of SQLAlchemy.</p>
<p>To create a database agnostic <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> that
separately specifies binary precision for Oracle Database, use
<a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.with_variant()</span></code></a> as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Float</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">oracle</span>

<span class="n">Column</span><span class="p">(</span>
    <span class="s2">&quot;float_data&quot;</span><span class="p">,</span>
    <span class="n">Float</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">with_variant</span><span class="p">(</span><span class="n">oracle</span><span class="o">.</span><span class="n">FLOAT</span><span class="p">(</span><span class="n">binary_precision</span><span class="o">=</span><span class="mi">16</span><span class="p">),</span> <span class="s2">&quot;oracle&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.BINARY_DOUBLE.params.asdecimal"></span><strong>asdecimal</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE.params.asdecimal">¶</a> – the same flag as that of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a>, but
defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.   Note that setting this flag to <code class="docutils literal notranslate"><span class="pre">True</span></code>
results in floating point conversion.</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.BINARY_DOUBLE.params.decimal_return_scale"></span><strong>decimal_return_scale</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.BINARY_DOUBLE.params.decimal_return_scale">¶</a> – Default scale to use when converting
from floats to Python decimals.  Floating point values will typically
be much longer due to decimal inaccuracy, and most floating point
database types don’t have a notion of “scale”, so by default the
float type looks for the first ten decimal places when converting.
Specifying this value will override that length.  Note that the
MySQL float types, which do include “scale”, will use “scale”
as the default for decimal_return_scale, if not otherwise specified.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.BINARY_FLOAT">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">BINARY_FLOAT</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT" title="Link to this definition">¶</a></dt>
<dd><p>Implement the Oracle <code class="docutils literal notranslate"><span class="pre">BINARY_FLOAT</span></code> datatype.</p>
<p>This datatype differs from the Oracle <code class="docutils literal notranslate"><span class="pre">FLOAT</span></code> datatype in that it
delivers a true 4-byte FP value.   The datatype may be combined with a
generic <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> datatype using <a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.with_variant()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#oracle-float-support"><span class="std std-ref">FLOAT / DOUBLE Support and Behaviors</span></a></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT" title="sqlalchemy.dialects.oracle.BINARY_FLOAT"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.BINARY_FLOAT</span></code></a> (<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.Float</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.BINARY_FLOAT.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.BINARY_FLOAT.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">precision</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asdecimal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimal_return_scale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT.__init__" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.types.Float.__init__</span></code> <em>method of</em> <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a></p>
</div>
<p>Construct a Float.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.dialects.oracle.BINARY_FLOAT.params.precision"></span><strong>precision</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT.params.precision">¶</a> – <p>the numeric precision for use in DDL <code class="docutils literal notranslate"><span class="pre">CREATE</span>
<span class="pre">TABLE</span></code>. Backends <strong>should</strong> attempt to ensure this precision
indicates a number of digits for the generic
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> datatype.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For the Oracle Database backend, the
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float.params.precision" title="sqlalchemy.types.Float"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Float.precision</span></code></a> parameter is not accepted
when rendering DDL, as Oracle Database does not support float precision
specified as a number of decimal places. Instead, use the
Oracle Database-specific <a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT" title="sqlalchemy.dialects.oracle.FLOAT"><code class="xref py py-class docutils literal notranslate"><span class="pre">FLOAT</span></code></a> datatype and specify the
<a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT.params.binary_precision" title="sqlalchemy.dialects.oracle.FLOAT"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">FLOAT.binary_precision</span></code></a> parameter. This is new
in version 2.0 of SQLAlchemy.</p>
<p>To create a database agnostic <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a> that
separately specifies binary precision for Oracle Database, use
<a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine.with_variant" title="sqlalchemy.types.TypeEngine.with_variant"><code class="xref py py-meth docutils literal notranslate"><span class="pre">TypeEngine.with_variant()</span></code></a> as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Column</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">Float</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.dialects</span> <span class="kn">import</span> <span class="n">oracle</span>

<span class="n">Column</span><span class="p">(</span>
    <span class="s2">&quot;float_data&quot;</span><span class="p">,</span>
    <span class="n">Float</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">with_variant</span><span class="p">(</span><span class="n">oracle</span><span class="o">.</span><span class="n">FLOAT</span><span class="p">(</span><span class="n">binary_precision</span><span class="o">=</span><span class="mi">16</span><span class="p">),</span> <span class="s2">&quot;oracle&quot;</span><span class="p">),</span>
<span class="p">)</span></pre></div>
</div>
</div>
</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.BINARY_FLOAT.params.asdecimal"></span><strong>asdecimal</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT.params.asdecimal">¶</a> – the same flag as that of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a>, but
defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.   Note that setting this flag to <code class="docutils literal notranslate"><span class="pre">True</span></code>
results in floating point conversion.</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.BINARY_FLOAT.params.decimal_return_scale"></span><strong>decimal_return_scale</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.BINARY_FLOAT.params.decimal_return_scale">¶</a> – Default scale to use when converting
from floats to Python decimals.  Floating point values will typically
be much longer due to decimal inaccuracy, and most floating point
database types don’t have a notion of “scale”, so by default the
float type looks for the first ten decimal places when converting.
Specifying this value will override that length.  Note that the
MySQL float types, which do include “scale”, will use “scale”
as the default for decimal_return_scale, if not otherwise specified.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.DATE">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">DATE</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.DATE" title="Link to this definition">¶</a></dt>
<dd><p>Provide the Oracle Database DATE type.</p>
<p>This type has no special Python behavior, except that it subclasses
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTime</span></code></a>; this is to suit the fact that the Oracle Database
<code class="docutils literal notranslate"><span class="pre">DATE</span></code> type supports a time value.</p>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.DATE.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.DATE" title="sqlalchemy.dialects.oracle.DATE"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.DATE</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.types._OracleDateLiteralRender</span></code>, <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.DateTime</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.DATE.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.DATE"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.DATE.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.DATE.__init__" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.types.DateTime.__init__</span></code> <em>method of</em> <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTime</span></code></a></p>
</div>
<p>Construct a new <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.DateTime" title="sqlalchemy.types.DateTime"><code class="xref py py-class docutils literal notranslate"><span class="pre">DateTime</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="target" id="sqlalchemy.dialects.oracle.DATE.params.timezone"></span><strong>timezone</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.DATE.params.timezone">¶</a> – boolean.  Indicates that the datetime type should
enable timezone support, if available on the
<strong>base date/time-holding type only</strong>.   It is recommended
to make use of the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.TIMESTAMP" title="sqlalchemy.types.TIMESTAMP"><code class="xref py py-class docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></a> datatype directly when
using this flag, as some databases include separate generic
date/time-holding types distinct from the timezone-capable
TIMESTAMP datatype, such as Oracle Database.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.FLOAT">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">FLOAT</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.FLOAT" title="Link to this definition">¶</a></dt>
<dd><p>Oracle Database FLOAT.</p>
<p>This is the same as <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.FLOAT" title="sqlalchemy.types.FLOAT"><code class="xref py py-class docutils literal notranslate"><span class="pre">FLOAT</span></code></a> except that
an Oracle Database -specific <a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT.params.binary_precision" title="sqlalchemy.dialects.oracle.FLOAT"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">FLOAT.binary_precision</span></code></a>
parameter is accepted, and
the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float.params.precision" title="sqlalchemy.types.Float"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Float.precision</span></code></a> parameter is not accepted.</p>
<p>Oracle Database FLOAT types indicate precision in terms of “binary
precision”, which defaults to 126. For a REAL type, the value is 63. This
parameter does not cleanly map to a specific number of decimal places but
is roughly equivalent to the desired number of decimal places divided by
0.3103.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT" title="sqlalchemy.dialects.oracle.FLOAT"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.FLOAT</span></code></a> (<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.FLOAT" title="sqlalchemy.types.FLOAT"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.FLOAT</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.FLOAT.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.FLOAT"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.FLOAT.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">binary_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">asdecimal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decimal_return_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.FLOAT.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a FLOAT</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.dialects.oracle.FLOAT.params.binary_precision"></span><strong>binary_precision</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.FLOAT.params.binary_precision">¶</a> – Oracle Database binary precision value to be
rendered in DDL. This may be approximated to the number of decimal
characters using the formula “decimal precision = 0.30103 * binary
precision”.  The default value used by Oracle Database for FLOAT /
DOUBLE PRECISION is 126.</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.FLOAT.params.asdecimal"></span><strong>asdecimal</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.FLOAT.params.asdecimal">¶</a> – See <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float.params.asdecimal" title="sqlalchemy.types.Float"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Float.asdecimal</span></code></a></p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.FLOAT.params.decimal_return_scale"></span><strong>decimal_return_scale</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.FLOAT.params.decimal_return_scale">¶</a> – See
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float.params.decimal_return_scale" title="sqlalchemy.types.Float"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Float.decimal_return_scale</span></code></a></p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.INTERVAL">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">INTERVAL</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.INTERVAL" title="Link to this definition">¶</a></dt>
<dd><div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.INTERVAL.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.INTERVAL" title="sqlalchemy.dialects.oracle.INTERVAL"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.INTERVAL</span></code></a> (<code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.NativeForEmulated</span></code>, <code class="docutils literal notranslate"><span class="pre">sqlalchemy.types._AbstractInterval</span></code>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.INTERVAL.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.INTERVAL"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.INTERVAL.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">day_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">second_precision</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.INTERVAL.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct an INTERVAL.</p>
<p>Note that only DAY TO SECOND intervals are currently supported.
This is due to a lack of support for YEAR TO MONTH intervals
within available DBAPIs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.dialects.oracle.INTERVAL.params.day_precision"></span><strong>day_precision</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.INTERVAL.params.day_precision">¶</a> – the day precision value.  this is the number of
digits to store for the day field.  Defaults to “2”</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.INTERVAL.params.second_precision"></span><strong>second_precision</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.INTERVAL.params.second_precision">¶</a> – the second precision value.  this is the
number of digits to store for the fractional seconds field.
Defaults to “6”.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.NCLOB">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">NCLOB</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.NCLOB" title="Link to this definition">¶</a></dt>
<dd><div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB" title="sqlalchemy.dialects.oracle.NCLOB"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.NCLOB</span></code></a> (<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Text" title="sqlalchemy.types.Text"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.Text</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.NCLOB.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.NCLOB.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.NCLOB.__init__" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.types.String.__init__</span></code> <em>method of</em> <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.String" title="sqlalchemy.types.String"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a></p>
</div>
<p>Create a string-holding type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.dialects.oracle.NCLOB.params.length"></span><strong>length</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.NCLOB.params.length">¶</a> – optional, a length for the column for use in
DDL and CAST expressions.  May be safely omitted if no <code class="docutils literal notranslate"><span class="pre">CREATE</span>
<span class="pre">TABLE</span></code> will be issued.  Certain databases may require a
<code class="docutils literal notranslate"><span class="pre">length</span></code> for use in DDL, and will raise an exception when
the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> DDL is issued if a <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code>
with no length is included.  Whether the value is
interpreted as bytes or characters is database specific.</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.NCLOB.params.collation"></span><strong>collation</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.NCLOB.params.collation">¶</a> – <p>Optional, a column-level collation for
use in DDL and CAST expressions.  Renders using the
COLLATE keyword supported by SQLite, MySQL, and PostgreSQL.
E.g.:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">cast</span><span class="p">,</span> <span class="n">select</span><span class="p">,</span> <span class="n">String</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;some string&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="n">collation</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">))))</span>
<div class='show_sql_print'><span class="k">SELECT</span><span class="w"> </span><span class="k">CAST</span><span class="p">(:</span><span class="n">param_1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">anon_1</span>
</div></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In most cases, the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> or <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a>
datatypes should be used for a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that expects
to store non-ascii data. These datatypes will ensure that the
correct types are used on the database.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.NVARCHAR2">
<em class="property"><span class="pre">attribute</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle."><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle..</span></code></a><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">NVARCHAR2</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.NVARCHAR2" title="Link to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.NVARCHAR" title="sqlalchemy.sql.sqltypes.NVARCHAR"><code class="xref py py-class docutils literal notranslate"><span class="pre">NVARCHAR</span></code></a></p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.NUMBER">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">NUMBER</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.NUMBER" title="Link to this definition">¶</a></dt>
<dd><div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.NUMBER" title="sqlalchemy.dialects.oracle.NUMBER"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.NUMBER</span></code></a> (<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.Numeric</span></code></a>, <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Integer" title="sqlalchemy.types.Integer"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.Integer</span></code></a>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.LONG">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">LONG</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.LONG" title="Link to this definition">¶</a></dt>
<dd><div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.LONG.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.LONG" title="sqlalchemy.dialects.oracle.LONG"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.LONG</span></code></a> (<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Text" title="sqlalchemy.types.Text"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.Text</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.LONG.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.LONG"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.LONG.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">length</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.LONG.__init__" title="Link to this definition">¶</a></dt>
<dd><div class="inherited-member docutils container">
<p><em>inherited from the</em> <code class="docutils literal notranslate"><span class="pre">sqlalchemy.types.String.__init__</span></code> <em>method of</em> <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.String" title="sqlalchemy.types.String"><code class="xref py py-class docutils literal notranslate"><span class="pre">String</span></code></a></p>
</div>
<p>Create a string-holding type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.dialects.oracle.LONG.params.length"></span><strong>length</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.LONG.params.length">¶</a> – optional, a length for the column for use in
DDL and CAST expressions.  May be safely omitted if no <code class="docutils literal notranslate"><span class="pre">CREATE</span>
<span class="pre">TABLE</span></code> will be issued.  Certain databases may require a
<code class="docutils literal notranslate"><span class="pre">length</span></code> for use in DDL, and will raise an exception when
the <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">TABLE</span></code> DDL is issued if a <code class="docutils literal notranslate"><span class="pre">VARCHAR</span></code>
with no length is included.  Whether the value is
interpreted as bytes or characters is database specific.</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.LONG.params.collation"></span><strong>collation</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.LONG.params.collation">¶</a> – <p>Optional, a column-level collation for
use in DDL and CAST expressions.  Renders using the
COLLATE keyword supported by SQLite, MySQL, and PostgreSQL.
E.g.:</p>
<div class="highlight-pycon+sql notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">cast</span><span class="p">,</span> <span class="n">select</span><span class="p">,</span> <span class="n">String</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">print</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">cast</span><span class="p">(</span><span class="s2">&quot;some string&quot;</span><span class="p">,</span> <span class="n">String</span><span class="p">(</span><span class="n">collation</span><span class="o">=</span><span class="s2">&quot;utf8&quot;</span><span class="p">))))</span>
<div class='show_sql_print'><span class="k">SELECT</span><span class="w"> </span><span class="k">CAST</span><span class="p">(:</span><span class="n">param_1</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="w"> </span><span class="k">COLLATE</span><span class="w"> </span><span class="n">utf8</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">anon_1</span>
</div></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In most cases, the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> or <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a>
datatypes should be used for a <a class="reference internal" href="../core/metadata.html#sqlalchemy.schema.Column" title="sqlalchemy.schema.Column"><code class="xref py py-class docutils literal notranslate"><span class="pre">Column</span></code></a> that expects
to store non-ascii data. These datatypes will ensure that the
correct types are used on the database.</p>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.RAW">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">RAW</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.RAW" title="Link to this definition">¶</a></dt>
<dd><div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.RAW" title="sqlalchemy.dialects.oracle.RAW"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.RAW</span></code></a> (<code class="docutils literal notranslate"><span class="pre">sqlalchemy.types._Binary</span></code>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.ROWID">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">ROWID</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.ROWID" title="Link to this definition">¶</a></dt>
<dd><p>Oracle Database ROWID type.</p>
<p>When used in a cast() or similar, generates ROWID.</p>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.ROWID" title="sqlalchemy.dialects.oracle.ROWID"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.ROWID</span></code></a> (<a class="reference internal" href="../core/type_api.html#sqlalchemy.types.TypeEngine" title="sqlalchemy.types.TypeEngine"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.TypeEngine</span></code></a>)</p>
</div>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.TIMESTAMP">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">sqlalchemy.dialects.oracle.</span></span><span class="sig-name descname"><span class="pre">TIMESTAMP</span></span><a class="headerlink" href="#sqlalchemy.dialects.oracle.TIMESTAMP" title="Link to this definition">¶</a></dt>
<dd><p>Oracle Database implementation of <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span></code>, which supports
additional Oracle Database-specific modes</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.</span></p>
</div>
<div class="class-members docutils container">
<p><strong>Members</strong></p>
<p><a class="reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP.__init__"><span class="sig-name descname">__init__()</span></a></p>
</div>
<div class="class-bases docutils container">
<p><strong>Class signature</strong></p>
<p>class <a class="reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP" title="sqlalchemy.dialects.oracle.TIMESTAMP"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.TIMESTAMP</span></code></a> (<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.TIMESTAMP" title="sqlalchemy.types.TIMESTAMP"><code class="xref py py-class docutils literal notranslate"><span class="pre">sqlalchemy.types.TIMESTAMP</span></code></a>)</p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="sqlalchemy.dialects.oracle.TIMESTAMP.__init__">
<em class="property"><span class="pre">method</span> </em><a class="reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP"><code class="docutils literal notranslate"><span class="pre">sqlalchemy.dialects.oracle.TIMESTAMP.</span></code></a><span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">local_timezone</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#sqlalchemy.dialects.oracle.TIMESTAMP.__init__" title="Link to this definition">¶</a></dt>
<dd><p>Construct a new <a class="reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP" title="sqlalchemy.dialects.oracle.TIMESTAMP"><code class="xref py py-class docutils literal notranslate"><span class="pre">TIMESTAMP</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><span class="target" id="sqlalchemy.dialects.oracle.TIMESTAMP.params.timezone"></span><strong>timezone</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP.params.timezone">¶</a> – boolean.  Indicates that the TIMESTAMP type should
use Oracle Database’s <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code> datatype.</p></li>
<li><p><span class="target" id="sqlalchemy.dialects.oracle.TIMESTAMP.params.local_timezone"></span><strong>local_timezone</strong><a class="paramlink headerlink reference internal" href="#sqlalchemy.dialects.oracle.TIMESTAMP.params.local_timezone">¶</a> – boolean.  Indicates that the TIMESTAMP type
should use Oracle Database’s <code class="docutils literal notranslate"><span class="pre">TIMESTAMP</span> <span class="pre">WITH</span> <span class="pre">LOCAL</span> <span class="pre">TIME</span> <span class="pre">ZONE</span></code>
datatype.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-sqlalchemy.dialects.oracle.oracledb">
<span id="python-oracledb"></span><span id="oracledb"></span><h2>python-oracledb<a class="headerlink" href="#module-sqlalchemy.dialects.oracle.oracledb" title="Link to this heading">¶</a></h2>
<p>Support for the Oracle Database database via the python-oracledb driver.</p>
<section id="dialect-oracle-oracledb-url">
<h3>DBAPI<a class="headerlink" href="#dialect-oracle-oracledb-url" title="Link to this heading">¶</a></h3>
<p>Documentation and download information (if applicable) for python-oracledb is available at:
<a class="reference external" href="https://oracle.github.io/python-oracledb/">https://oracle.github.io/python-oracledb/</a></p>
</section>
<section id="dialect-oracle-oracledb-connect">
<h3>Connecting<a class="headerlink" href="#dialect-oracle-oracledb-connect" title="Link to this heading">¶</a></h3>
<p>Connect String:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">oracle</span><span class="o">+</span><span class="n">oracledb</span><span class="p">:</span><span class="o">//</span><span class="n">user</span><span class="p">:</span><span class="k">pass</span><span class="nd">@hostname</span><span class="p">:</span><span class="n">port</span><span class="p">[</span><span class="o">/</span><span class="n">dbname</span><span class="p">][</span><span class="err">?</span><span class="n">service_name</span><span class="o">=&lt;</span><span class="n">service</span><span class="o">&gt;</span><span class="p">[</span><span class="o">&amp;</span><span class="n">key</span><span class="o">=</span><span class="n">value</span><span class="o">&amp;</span><span class="n">key</span><span class="o">=</span><span class="n">value</span><span class="o">...</span><span class="p">]]</span></pre></div>
</div>
</p>
</section>
<section id="description">
<h3>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h3>
<p>Python-oracledb is the Oracle Database driver for Python. It features a default
“thin” client mode that requires no dependencies, and an optional “thick” mode
that uses Oracle Client libraries.  It supports SQLAlchemy features including
two phase transactions and Asyncio.</p>
<p>Python-oracle is the renamed, updated cx_Oracle driver. Oracle is no longer
doing any releases in the cx_Oracle namespace.</p>
<p>The SQLAlchemy <code class="docutils literal notranslate"><span class="pre">oracledb</span></code> dialect provides both a sync and an async
implementation under the same dialect name. The proper version is
selected depending on how the engine is created:</p>
<ul>
<li><p>calling <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">oracle+oracledb://...</span></code> will
automatically select the sync version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>

<span class="n">sync_engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@localhost?service_name=FREEPDB1&quot;</span>
<span class="p">)</span></pre></div>
</div>
</li>
<li><p>calling <a class="reference internal" href="../orm/extensions/asyncio.html#sqlalchemy.ext.asyncio.create_async_engine" title="sqlalchemy.ext.asyncio.create_async_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_async_engine()</span></code></a> with <code class="docutils literal notranslate"><span class="pre">oracle+oracledb://...</span></code>
will automatically select the async version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>

<span class="n">asyncio_engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@localhost?service_name=FREEPDB1&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>The asyncio version of the dialect may also be specified explicitly using the
<code class="docutils literal notranslate"><span class="pre">oracledb_async</span></code> suffix:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy.ext.asyncio</span> <span class="kn">import</span> <span class="n">create_async_engine</span>

<span class="n">asyncio_engine</span> <span class="o">=</span> <span class="n">create_async_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb_async://scott:tiger@localhost?service_name=FREEPDB1&quot;</span>
<span class="p">)</span></pre></div>
</div>
</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.25: </span>added support for the async version of oracledb.</p>
</div>
</section>
<section id="thick-mode-support">
<h3>Thick mode support<a class="headerlink" href="#thick-mode-support" title="Link to this heading">¶</a></h3>
<p>By default, the python-oracledb driver runs in a “thin” mode that does not
require Oracle Client libraries to be installed. The driver also supports a
“thick” mode that uses Oracle Client libraries to get functionality such as
Oracle Application Continuity.</p>
<p>To enable thick mode, call <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/api_manual/module.html#oracledb.init_oracle_client">oracledb.init_oracle_client()</a>
explicitly, or pass the parameter <code class="docutils literal notranslate"><span class="pre">thick_mode=True</span></code> to
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>. To pass custom arguments to
<code class="docutils literal notranslate"><span class="pre">init_oracle_client()</span></code>, like the <code class="docutils literal notranslate"><span class="pre">lib_dir</span></code> path, a dict may be passed, for
example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">sa</span><span class="o">.</span><span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://...&quot;</span><span class="p">,</span>
    <span class="n">thick_mode</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;lib_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/oracle/client/lib&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/network_config_file_directory&quot;</span><span class="p">,</span>
        <span class="s2">&quot;driver_name&quot;</span><span class="p">:</span> <span class="s2">&quot;my-app : 1.0.0&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
<p>Note that passing a <code class="docutils literal notranslate"><span class="pre">lib_dir</span></code> path should only be done on macOS or
Windows. On Linux it does not behave as you might expect.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>python-oracledb documentation <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/user_guide/initialization.html#enabling-python-oracledb-thick-mode">Enabling python-oracledb Thick mode</a></p>
</div>
</section>
<section id="connecting-to-oracle-database">
<h3>Connecting to Oracle Database<a class="headerlink" href="#connecting-to-oracle-database" title="Link to this heading">¶</a></h3>
<p>python-oracledb provides several methods of indicating the target database.
The dialect translates from a series of different URL forms.</p>
<p>Given the hostname, port and service name of the target database, you can
connect in SQLAlchemy using the <code class="docutils literal notranslate"><span class="pre">service_name</span></code> query string parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@hostname:port?service_name=myservice&quot;</span>
<span class="p">)</span></pre></div>
</div>
<section id="connecting-with-easy-connect-strings">
<h4>Connecting with Easy Connect strings<a class="headerlink" href="#connecting-with-easy-connect-strings" title="Link to this heading">¶</a></h4>
<p>You can pass any valid python-oracledb connection string as the <code class="docutils literal notranslate"><span class="pre">dsn</span></code> key
value in a <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.connect_args</span></code></a> dictionary.  See
python-oracledb documentation <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/user_guide/connection_handling.html#oracle-net-services-connection-strings">Oracle Net Services Connection Strings</a>.</p>
<p>For example to use an <a class="reference external" href="https://download.oracle.com/ocomdocs/global/Oracle-Net-Easy-Connect-Plus.pdf">Easy Connect string</a>
with a timeout to prevent connection establishment from hanging if the network
transport to the database cannot be establishd in 30 seconds, and also setting
a keep-alive time of 60 seconds to stop idle network connections from being
terminated by a firewall:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://@&quot;</span><span class="p">,</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;scott&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dsn&quot;</span><span class="p">:</span> <span class="s2">&quot;hostname:port/myservice?transport_connect_timeout=30&amp;expire_time=60&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
<p>The Easy Connect syntax has been enhanced during the life of Oracle Database.
Review the documentation for your database version.  The current documentation
is at <a class="reference external" href="https://www.oracle.com/pls/topic/lookup?ctx=dblatest&amp;id=GUID-B0437826-43C1-49EC-A94D-B650B6A4A6EE">Understanding the Easy Connect Naming Method</a>.</p>
<p>The general syntax is similar to:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[[protocol:]//]host[:port][/[service_name]][?parameter_name=value{&amp;parameter_name=value}]</pre></div>
</div>
<p>Note that although the SQLAlchemy URL syntax <code class="docutils literal notranslate"><span class="pre">hostname:port/dbname</span></code> looks
like Oracle’s Easy Connect syntax, it is different. SQLAlchemy’s URL requires a
system identifier (SID) for the <code class="docutils literal notranslate"><span class="pre">dbname</span></code> component:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+oracledb://scott:tiger@hostname:port/sid&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Easy Connect syntax does not support SIDs. It uses services names, which are
the preferred choice for connecting to Oracle Database.</p>
</section>
<section id="passing-python-oracledb-connect-arguments">
<h4>Passing python-oracledb connect arguments<a class="headerlink" href="#passing-python-oracledb-connect-arguments" title="Link to this heading">¶</a></h4>
<p>Other python-oracledb driver <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/api_manual/module.html#oracledb.connect">connection options</a>
can be passed in <code class="docutils literal notranslate"><span class="pre">connect_args</span></code>.  For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://@&quot;</span><span class="p">,</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;scott&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dsn&quot;</span><span class="p">:</span> <span class="s2">&quot;hostname:port/myservice&quot;</span><span class="p">,</span>
        <span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
        <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="n">oracledb</span><span class="o">.</span><span class="n">AUTH_MODE_SYSDBA</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
</section>
<section id="connecting-with-tnsnames-ora-tns-aliases">
<h4>Connecting with tnsnames.ora TNS aliases<a class="headerlink" href="#connecting-with-tnsnames-ora-tns-aliases" title="Link to this heading">¶</a></h4>
<p>If no port, database name, or service name is provided, the dialect will use an
Oracle Database DSN “connection string”.  This takes the “hostname” portion of
the URL as the data source name.  For example, if the <code class="docutils literal notranslate"><span class="pre">tnsnames.ora</span></code> file
contains a <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/user_guide/connection_handling.html#tns-aliases-for-connection-strings">TNS Alias</a>
of <code class="docutils literal notranslate"><span class="pre">myalias</span></code> as below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>myalias =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = mymachine.example.com)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orclpdb1)
    )
  )</pre></div>
</div>
<p>The python-oracledb dialect connects to this database service when <code class="docutils literal notranslate"><span class="pre">myalias</span></code> is the
hostname portion of the URL, without specifying a port, database name or
<code class="docutils literal notranslate"><span class="pre">service_name</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+oracledb://scott:tiger@myalias&quot;</span><span class="p">)</span></pre></div>
</div>
</section>
<section id="connecting-to-oracle-autonomous-database">
<h4>Connecting to Oracle Autonomous Database<a class="headerlink" href="#connecting-to-oracle-autonomous-database" title="Link to this heading">¶</a></h4>
<p>Users of Oracle Autonomous Database should use either use the TNS Alias URL
shown above, or pass the TNS Alias as the <code class="docutils literal notranslate"><span class="pre">dsn</span></code> key value in a
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.connect_args</span></code></a> dictionary.</p>
<p>If Oracle Autonomous Database is configured for mutual TLS (“mTLS”)
connections, then additional configuration is required as shown in <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/user_guide/connection_handling.html#connecting-to-oracle-cloud-autonomous-databases">Connecting
to Oracle Cloud Autonomous Databases</a>. In
summary, Thick mode users should configure file locations and set the wallet
path in <code class="docutils literal notranslate"><span class="pre">sqlnet.ora</span></code> appropriately:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://@&quot;</span><span class="p">,</span>
    <span class="n">thick_mode</span><span class="o">=</span><span class="p">{</span>
        <span class="c1"># directory containing tnsnames.ora and cwallet.so</span>
        <span class="s2">&quot;config_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/opt/oracle/wallet_dir&quot;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;scott&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dsn&quot;</span><span class="p">:</span> <span class="s2">&quot;mydb_high&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
<p>Thin mode users of mTLS should pass the appropriate directories and PEM wallet
password when creating the engine, similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://@&quot;</span><span class="p">,</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;scott&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dsn&quot;</span><span class="p">:</span> <span class="s2">&quot;mydb_high&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config_dir&quot;</span><span class="p">:</span> <span class="s2">&quot;/opt/oracle/wallet_dir&quot;</span><span class="p">,</span>  <span class="c1"># directory containing tnsnames.ora</span>
        <span class="s2">&quot;wallet_location&quot;</span><span class="p">:</span> <span class="s2">&quot;/opt/oracle/wallet_dir&quot;</span><span class="p">,</span>  <span class="c1"># directory containing ewallet.pem</span>
        <span class="s2">&quot;wallet_password&quot;</span><span class="p">:</span> <span class="s2">&quot;top secret&quot;</span><span class="p">,</span>  <span class="c1"># password for the PEM file</span>
    <span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
<p>Typically <code class="docutils literal notranslate"><span class="pre">config_dir</span></code> and <code class="docutils literal notranslate"><span class="pre">wallet_location</span></code> are the same directory, which
is where the Oracle Autonomous Database wallet zip file was extracted.  Note
this directory should be protected.</p>
</section>
</section>
<section id="connection-pooling">
<h3>Connection Pooling<a class="headerlink" href="#connection-pooling" title="Link to this heading">¶</a></h3>
<p>Applications with multiple concurrent users should use connection pooling. A
minimal sized connection pool is also beneficial for long-running, single-user
applications that do not frequently use a connection.</p>
<p>The python-oracledb driver provides its own connection pool implementation that
may be used in place of SQLAlchemy’s pooling functionality.  The driver pool
gives support for high availability features such as dead connection detection,
connection draining for planned database downtime, support for Oracle
Application Continuity and Transparent Application Continuity, and gives
support for <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/user_guide/connection_handling.html#database-resident-connection-pooling-drcp">Database Resident Connection Pooling (DRCP)</a>.</p>
<p>To take advantage of python-oracledb’s pool, use the
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.creator" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.creator</span></code></a> parameter to provide a function that
returns a new connection, along with setting
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.pool_class" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.pool_class</span></code></a> to <code class="docutils literal notranslate"><span class="pre">NullPool</span></code> to disable
SQLAlchemy’s pooling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">oracledb</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.pool</span> <span class="kn">import</span> <span class="n">NullPool</span>

<span class="c1"># Uncomment to use the optional python-oracledb Thick mode.</span>
<span class="c1"># Review the python-oracledb doc for the appropriate parameters</span>
<span class="c1"># oracledb.init_oracle_client(&lt;your parameters&gt;)</span>

<span class="n">pool</span> <span class="o">=</span> <span class="n">oracledb</span><span class="o">.</span><span class="n">create_pool</span><span class="p">(</span>
    <span class="n">user</span><span class="o">=</span><span class="s2">&quot;scott&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
    <span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;localhost:1521/freepdb1&quot;</span><span class="p">,</span>
    <span class="n">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">max</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">increment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://&quot;</span><span class="p">,</span> <span class="n">creator</span><span class="o">=</span><span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">,</span> <span class="n">poolclass</span><span class="o">=</span><span class="n">NullPool</span>
<span class="p">)</span></pre></div>
</div>
<p>The above engine may then be used normally. Internally, python-oracledb handles
connection pooling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 1 from dual&quot;</span><span class="p">)))</span></pre></div>
</div>
<p>Refer to the python-oracledb documentation for <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/api_manual/module.html#oracledb.create_pool">oracledb.create_pool()</a>
for the arguments that can be used when creating a connection pool.</p>
</section>
<section id="using-oracle-database-resident-connection-pooling-drcp">
<span id="drcp"></span><h3>Using Oracle Database Resident Connection Pooling (DRCP)<a class="headerlink" href="#using-oracle-database-resident-connection-pooling-drcp" title="Link to this heading">¶</a></h3>
<p>When using Oracle Database’s Database Resident Connection Pooling (DRCP), the
best practice is to specify a connection class and “purity”. Refer to the
<a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/user_guide/connection_handling.html#database-resident-connection-pooling-drcp">python-oracledb documentation on DRCP</a>.
For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">oracledb</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.pool</span> <span class="kn">import</span> <span class="n">NullPool</span>

<span class="c1"># Uncomment to use the optional python-oracledb Thick mode.</span>
<span class="c1"># Review the python-oracledb doc for the appropriate parameters</span>
<span class="c1"># oracledb.init_oracle_client(&lt;your parameters&gt;)</span>

<span class="n">pool</span> <span class="o">=</span> <span class="n">oracledb</span><span class="o">.</span><span class="n">create_pool</span><span class="p">(</span>
    <span class="n">user</span><span class="o">=</span><span class="s2">&quot;scott&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
    <span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;localhost:1521/freepdb1&quot;</span><span class="p">,</span>
    <span class="n">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">max</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">increment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">cclass</span><span class="o">=</span><span class="s2">&quot;MYCLASS&quot;</span><span class="p">,</span>
    <span class="n">purity</span><span class="o">=</span><span class="n">oracledb</span><span class="o">.</span><span class="n">PURITY_SELF</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://&quot;</span><span class="p">,</span> <span class="n">creator</span><span class="o">=</span><span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">,</span> <span class="n">poolclass</span><span class="o">=</span><span class="n">NullPool</span>
<span class="p">)</span></pre></div>
</div>
<p>The above engine may then be used normally where python-oracledb handles
application connection pooling and Oracle Database additionally uses DRCP:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">text</span><span class="p">(</span><span class="s2">&quot;select 1 from dual&quot;</span><span class="p">)))</span></pre></div>
</div>
<p>If you wish to use different connection classes or purities for different
connections, then wrap <code class="docutils literal notranslate"><span class="pre">pool.acquire()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">oracledb</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">text</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.pool</span> <span class="kn">import</span> <span class="n">NullPool</span>

<span class="c1"># Uncomment to use python-oracledb Thick mode.</span>
<span class="c1"># Review the python-oracledb doc for the appropriate parameters</span>
<span class="c1"># oracledb.init_oracle_client(&lt;your parameters&gt;)</span>

<span class="n">pool</span> <span class="o">=</span> <span class="n">oracledb</span><span class="o">.</span><span class="n">create_pool</span><span class="p">(</span>
    <span class="n">user</span><span class="o">=</span><span class="s2">&quot;scott&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
    <span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;localhost:1521/freepdb1&quot;</span><span class="p">,</span>
    <span class="n">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">max</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">increment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">cclass</span><span class="o">=</span><span class="s2">&quot;MYCLASS&quot;</span><span class="p">,</span>
    <span class="n">purity</span><span class="o">=</span><span class="n">oracledb</span><span class="o">.</span><span class="n">PURITY_SELF</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">creator</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span><span class="n">cclass</span><span class="o">=</span><span class="s2">&quot;MYOTHERCLASS&quot;</span><span class="p">,</span> <span class="n">purity</span><span class="o">=</span><span class="n">oracledb</span><span class="o">.</span><span class="n">PURITY_NEW</span><span class="p">)</span>


<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://&quot;</span><span class="p">,</span> <span class="n">creator</span><span class="o">=</span><span class="n">creator</span><span class="p">,</span> <span class="n">poolclass</span><span class="o">=</span><span class="n">NullPool</span>
<span class="p">)</span></pre></div>
</div>
</section>
<section id="engine-options-consumed-by-the-sqlalchemy-oracledb-dialect-outside-of-the-driver">
<h3>Engine Options consumed by the SQLAlchemy oracledb dialect outside of the driver<a class="headerlink" href="#engine-options-consumed-by-the-sqlalchemy-oracledb-dialect-outside-of-the-driver" title="Link to this heading">¶</a></h3>
<p>There are also options that are consumed by the SQLAlchemy oracledb dialect
itself.  These options are always passed directly to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>,
such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+oracledb://user:pass@tnsalias&quot;</span><span class="p">,</span> <span class="n">arraysize</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span></pre></div>
</div>
<p>The parameters accepted by the oracledb dialect are as follows:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">arraysize</span></code> - set the driver cursor.arraysize value. It defaults to
<code class="docutils literal notranslate"><span class="pre">None</span></code>, indicating that the driver default value of 100 should be used.
This setting controls how many rows are buffered when fetching rows, and can
have a significant effect on performance if increased for queries that return
large numbers of rows.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0.26: </span>- changed the default value from 50 to None,
to use the default value of the driver itself.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto_convert_lobs</span></code> - defaults to True; See <a class="reference internal" href="#oracledb-lob"><span class="std std-ref">LOB Datatypes</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coerce_to_decimal</span></code> - see <a class="reference internal" href="#oracledb-numeric"><span class="std std-ref">Precision Numerics</span></a> for detail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">encoding_errors</span></code> - see <a class="reference internal" href="#oracledb-unicode-encoding-errors"><span class="std std-ref">Encoding Errors</span></a> for detail.</p></li>
</ul>
</section>
<section id="unicode">
<span id="oracledb-unicode"></span><h3>Unicode<a class="headerlink" href="#unicode" title="Link to this heading">¶</a></h3>
<p>As is the case for all DBAPIs under Python 3, all strings are inherently
Unicode strings.</p>
<section id="ensuring-the-correct-client-encoding">
<h4>Ensuring the Correct Client Encoding<a class="headerlink" href="#ensuring-the-correct-client-encoding" title="Link to this heading">¶</a></h4>
<p>In python-oracledb, the encoding used for all character data is “UTF-8”.</p>
</section>
<section id="unicode-specific-column-datatypes">
<h4>Unicode-specific Column datatypes<a class="headerlink" href="#unicode-specific-column-datatypes" title="Link to this heading">¶</a></h4>
<p>The Core expression language handles unicode data by use of the
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a> datatypes.  These types correspond
to the VARCHAR2 and CLOB Oracle Database datatypes by default.  When using
these datatypes with Unicode data, it is expected that the database is
configured with a Unicode-aware character set so that the VARCHAR2 and CLOB
datatypes can accommodate the data.</p>
<p>In the case that Oracle Database is not configured with a Unicode character
set, the two options are to use the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.NCHAR" title="sqlalchemy.types.NCHAR"><code class="xref py py-class docutils literal notranslate"><span class="pre">NCHAR</span></code></a> and
<a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB" title="sqlalchemy.dialects.oracle.NCLOB"><code class="xref py py-class docutils literal notranslate"><span class="pre">NCLOB</span></code></a> datatypes explicitly, or to pass the flag
<code class="docutils literal notranslate"><span class="pre">use_nchar_for_unicode=True</span></code> to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>, which will cause
the SQLAlchemy dialect to use NCHAR/NCLOB for the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> /
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a> datatypes instead of VARCHAR/CLOB.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.3: </span>The <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a>
datatypes now correspond to the <code class="docutils literal notranslate"><span class="pre">VARCHAR2</span></code> and <code class="docutils literal notranslate"><span class="pre">CLOB</span></code> Oracle Database
datatypes unless the <code class="docutils literal notranslate"><span class="pre">use_nchar_for_unicode=True</span></code> is passed to the dialect
when <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> is called.</p>
</div>
</section>
<section id="encoding-errors">
<span id="oracledb-unicode-encoding-errors"></span><h4>Encoding Errors<a class="headerlink" href="#encoding-errors" title="Link to this heading">¶</a></h4>
<p>For the unusual case that data in Oracle Database is present with a broken
encoding, the dialect accepts a parameter <code class="docutils literal notranslate"><span class="pre">encoding_errors</span></code> which will be
passed to Unicode decoding functions in order to affect how decoding errors are
handled.  The value is ultimately consumed by the Python <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes.decode">decode</a> function, and
is passed both via python-oracledb’s <code class="docutils literal notranslate"><span class="pre">encodingErrors</span></code> parameter consumed by
<code class="docutils literal notranslate"><span class="pre">Cursor.var()</span></code>, as well as SQLAlchemy’s own decoding function, as the
python-oracledb dialect makes use of both under different circumstances.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.11.</span></p>
</div>
</section>
</section>
<section id="fine-grained-control-over-python-oracledb-data-binding-with-setinputsizes">
<span id="oracledb-setinputsizes"></span><h3>Fine grained control over python-oracledb data binding with setinputsizes<a class="headerlink" href="#fine-grained-control-over-python-oracledb-data-binding-with-setinputsizes" title="Link to this heading">¶</a></h3>
<p>The python-oracle DBAPI has a deep and fundamental reliance upon the usage of
the DBAPI <code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code> call.  The purpose of this call is to establish
the datatypes that are bound to a SQL statement for Python values being passed
as parameters.  While virtually no other DBAPI assigns any use to the
<code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code> call, the python-oracledb DBAPI relies upon it heavily in
its interactions with the Oracle Database, and in some scenarios it is not
possible for SQLAlchemy to know exactly how data should be bound, as some
settings can cause profoundly different performance characteristics, while
altering the type coercion behavior at the same time.</p>
<p>Users of the oracledb dialect are <strong>strongly encouraged</strong> to read through
python-oracledb’s list of built-in datatype symbols at <a class="reference external" href="https://python-oracledb.readthedocs.io/en/latest/api_manual/module.html#database-types">Database Types</a>
Note that in some cases, significant performance degradation can occur when
using these types vs. not.</p>
<p>On the SQLAlchemy side, the <a class="reference internal" href="../core/events.html#sqlalchemy.events.DialectEvents.do_setinputsizes" title="sqlalchemy.events.DialectEvents.do_setinputsizes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_setinputsizes()</span></code></a> event can
be used both for runtime visibility (e.g. logging) of the setinputsizes step as
well as to fully control how <code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code> is used on a per-statement
basis.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.9: </span>Added <code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.setinputsizes()</span></code></p>
</div>
<section id="example-1-logging-all-setinputsizes-calls">
<h4>Example 1 - logging all setinputsizes calls<a class="headerlink" href="#example-1-logging-all-setinputsizes-calls" title="Link to this heading">¶</a></h4>
<p>The following example illustrates how to log the intermediary values from a
SQLAlchemy perspective before they are converted to the raw <code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code>
parameter dictionary.  The keys of the dictionary are <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BindParameter</span></code></a>
objects which have a <code class="docutils literal notranslate"><span class="pre">.key</span></code> and a <code class="docutils literal notranslate"><span class="pre">.type</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">event</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@localhost:1521?service_name=freepdb1&quot;</span>
<span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;do_setinputsizes&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_log_setinputsizes</span><span class="p">(</span><span class="n">inputsizes</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">bindparam</span><span class="p">,</span> <span class="n">dbapitype</span> <span class="ow">in</span> <span class="n">inputsizes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Bound parameter name: </span><span class="si">%s</span><span class="s2">  SQLAlchemy type: </span><span class="si">%r</span><span class="s2"> DBAPI object: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">bindparam</span><span class="o">.</span><span class="n">key</span><span class="p">,</span>
            <span class="n">bindparam</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="n">dbapitype</span><span class="p">,</span>
        <span class="p">)</span></pre></div>
</div>
</section>
<section id="example-2-remove-all-bindings-to-clob">
<h4>Example 2 - remove all bindings to CLOB<a class="headerlink" href="#example-2-remove-all-bindings-to-clob" title="Link to this heading">¶</a></h4>
<p>For performance, fetching LOB datatypes from Oracle Database is set by default
for the <code class="docutils literal notranslate"><span class="pre">Text</span></code> type within SQLAlchemy.  This setting can be modified as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">oracledb</span> <span class="kn">import</span> <span class="n">CLOB</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@localhost:1521?service_name=freepdb1&quot;</span>
<span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;do_setinputsizes&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_remove_clob</span><span class="p">(</span><span class="n">inputsizes</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">bindparam</span><span class="p">,</span> <span class="n">dbapitype</span> <span class="ow">in</span> <span class="n">list</span><span class="p">(</span><span class="n">inputsizes</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">dbapitype</span> <span class="ow">is</span> <span class="n">CLOB</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">inputsizes</span><span class="p">[</span><span class="n">bindparam</span><span class="p">]</span></pre></div>
</div>
</section>
</section>
<section id="lob-datatypes">
<span id="oracledb-lob"></span><h3>LOB Datatypes<a class="headerlink" href="#lob-datatypes" title="Link to this heading">¶</a></h3>
<p>LOB datatypes refer to the “large object” datatypes such as CLOB, NCLOB and
BLOB. Oracle Database can efficiently return these datatypes as a single
buffer. SQLAlchemy makes use of type handlers to do this by default.</p>
<p>To disable the use of the type handlers and deliver LOB objects as classic
buffered objects with a <code class="docutils literal notranslate"><span class="pre">read()</span></code> method, the parameter
<code class="docutils literal notranslate"><span class="pre">auto_convert_lobs=False</span></code> may be passed to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>.</p>
</section>
<section id="oracledb-returning">
<span id="id1"></span><h3>RETURNING Support<a class="headerlink" href="#oracledb-returning" title="Link to this heading">¶</a></h3>
<p>The oracledb dialect implements RETURNING using OUT parameters.  The dialect
supports RETURNING fully.</p>
</section>
<section id="two-phase-transaction-support">
<h3>Two Phase Transaction Support<a class="headerlink" href="#two-phase-transaction-support" title="Link to this heading">¶</a></h3>
<p>Two phase transactions are fully supported with python-oracledb. (Thin mode
requires python-oracledb 2.3).  APIs for two phase transactions are provided at
the Core level via <a class="reference internal" href="../core/connections.html#sqlalchemy.engine.Connection.begin_twophase" title="sqlalchemy.engine.Connection.begin_twophase"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Connection.begin_twophase()</span></code></a> and
<a class="reference internal" href="../orm/session_api.html#sqlalchemy.orm.Session.params.twophase" title="sqlalchemy.orm.Session"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Session.twophase</span></code></a> for transparent ORM use.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0.32: </span>added support for two phase transactions</p>
</div>
</section>
<section id="precision-numerics">
<span id="oracledb-numeric"></span><h3>Precision Numerics<a class="headerlink" href="#precision-numerics" title="Link to this heading">¶</a></h3>
<p>SQLAlchemy’s numeric types can handle receiving and returning values as Python
<code class="docutils literal notranslate"><span class="pre">Decimal</span></code> objects or float objects.  When a <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a> object, or a
subclass such as <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DOUBLE_PRECISION</span></code> etc. is in
use, the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric.params.asdecimal" title="sqlalchemy.types.Numeric"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Numeric.asdecimal</span></code></a> flag determines if values should be
coerced to <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> upon return, or returned as float objects.  To make
matters more complicated under Oracle Database, the <code class="docutils literal notranslate"><span class="pre">NUMBER</span></code> type can also
represent integer values if the “scale” is zero, so the Oracle
Database-specific <a class="reference internal" href="#sqlalchemy.dialects.oracle.NUMBER" title="sqlalchemy.dialects.oracle.NUMBER"><code class="xref py py-class docutils literal notranslate"><span class="pre">NUMBER</span></code></a> type takes this into account as well.</p>
<p>The oracledb dialect makes extensive use of connection- and cursor-level
“outputtypehandler” callables in order to coerce numeric values as requested.
These callables are specific to the specific flavor of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a> in
use, as well as if no SQLAlchemy typing objects are present.  There are
observed scenarios where Oracle Database may send incomplete or ambiguous
information about the numeric types being returned, such as a query where the
numeric types are buried under multiple levels of subquery.  The type handlers
do their best to make the right decision in all cases, deferring to the
underlying python-oracledb DBAPI for all those cases where the driver can make
the best decision.</p>
<p>When no typing objects are present, as when executing plain SQL strings, a
default “outputtypehandler” is present which will generally return numeric
values which specify precision and scale as Python <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> objects.  To
disable this coercion to decimal for performance reasons, pass the flag
<code class="docutils literal notranslate"><span class="pre">coerce_to_decimal=False</span></code> to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+oracledb://scott:tiger@tnsalias&quot;</span><span class="p">,</span> <span class="n">coerce_to_decimal</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">coerce_to_decimal</span></code> flag only impacts the results of plain string
SQL statements that are not otherwise associated with a <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a>
SQLAlchemy type (or a subclass of such).</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.2: </span>The numeric handling system for the oracle dialects has
been reworked to take advantage of newer driver features as well as better
integration of outputtypehandlers.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0: </span>added support for the python-oracledb driver.</p>
</div>
</section>
</section>
<section id="cx-oracle">
<span id="id2"></span><h2>cx_Oracle<a class="headerlink" href="#cx-oracle" title="Link to this heading">¶</a></h2>
<p id="module-sqlalchemy.dialects.oracle.cx_oracle">Support for the Oracle Database database via the cx-Oracle driver.</p>
<section id="dialect-oracle-cx_oracle-url">
<h3>DBAPI<a class="headerlink" href="#dialect-oracle-cx_oracle-url" title="Link to this heading">¶</a></h3>
<p>Documentation and download information (if applicable) for cx-Oracle is available at:
<a class="reference external" href="https://oracle.github.io/python-cx_Oracle/">https://oracle.github.io/python-cx_Oracle/</a></p>
</section>
<section id="dialect-oracle-cx_oracle-connect">
<h3>Connecting<a class="headerlink" href="#dialect-oracle-cx_oracle-connect" title="Link to this heading">¶</a></h3>
<p>Connect String:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">oracle</span><span class="o">+</span><span class="n">cx_oracle</span><span class="p">:</span><span class="o">//</span><span class="n">user</span><span class="p">:</span><span class="k">pass</span><span class="nd">@hostname</span><span class="p">:</span><span class="n">port</span><span class="p">[</span><span class="o">/</span><span class="n">dbname</span><span class="p">][</span><span class="err">?</span><span class="n">service_name</span><span class="o">=&lt;</span><span class="n">service</span><span class="o">&gt;</span><span class="p">[</span><span class="o">&amp;</span><span class="n">key</span><span class="o">=</span><span class="n">value</span><span class="o">&amp;</span><span class="n">key</span><span class="o">=</span><span class="n">value</span><span class="o">...</span><span class="p">]]</span></pre></div>
</div>
</p>
</section>
<section id="id3">
<h3>Description<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h3>
<p>cx_Oracle was the original driver for Oracle Database. It was superseded by
python-oracledb which should be used instead.</p>
</section>
<section id="dsn-vs-hostname-connections">
<h3>DSN vs. Hostname connections<a class="headerlink" href="#dsn-vs-hostname-connections" title="Link to this heading">¶</a></h3>
<p>cx_Oracle provides several methods of indicating the target database.  The
dialect translates from a series of different URL forms.</p>
<section id="hostname-connections-with-easy-connect-syntax">
<h4>Hostname Connections with Easy Connect Syntax<a class="headerlink" href="#hostname-connections-with-easy-connect-syntax" title="Link to this heading">¶</a></h4>
<p>Given a hostname, port and service name of the target database, for example
from Oracle Database’s Easy Connect syntax then connect in SQLAlchemy using the
<code class="docutils literal notranslate"><span class="pre">service_name</span></code> query string parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://scott:tiger@hostname:port?service_name=myservice&amp;encoding=UTF-8&amp;nencoding=UTF-8&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>Note that the default driver value for encoding and nencoding was changed to
“UTF-8” in cx_Oracle 8.0 so these parameters can be omitted when using that
version, or later.</p>
<p>To use a full Easy Connect string, pass it as the <code class="docutils literal notranslate"><span class="pre">dsn</span></code> key value in a
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.connect_args</span></code></a> dictionary:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cx_Oracle</span>

<span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://@&quot;</span><span class="p">,</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;scott&quot;</span><span class="p">,</span>
        <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dsn&quot;</span><span class="p">:</span> <span class="s2">&quot;hostname:port/myservice?transport_connect_timeout=30&amp;expire_time=60&quot;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
</section>
<section id="connections-with-tnsnames-ora-or-to-oracle-autonomous-database">
<h4>Connections with tnsnames.ora or to Oracle Autonomous Database<a class="headerlink" href="#connections-with-tnsnames-ora-or-to-oracle-autonomous-database" title="Link to this heading">¶</a></h4>
<p>Alternatively, if no port, database name, or service name is provided, the
dialect will use an Oracle Database DSN “connection string”.  This takes the
“hostname” portion of the URL as the data source name.  For example, if the
<code class="docutils literal notranslate"><span class="pre">tnsnames.ora</span></code> file contains a TNS Alias of <code class="docutils literal notranslate"><span class="pre">myalias</span></code> as below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>myalias =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = mymachine.example.com)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = orclpdb1)
    )
  )</pre></div>
</div>
<p>The cx_Oracle dialect connects to this database service when <code class="docutils literal notranslate"><span class="pre">myalias</span></code> is the
hostname portion of the URL, without specifying a port, database name or
<code class="docutils literal notranslate"><span class="pre">service_name</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+cx_oracle://scott:tiger@myalias&quot;</span><span class="p">)</span></pre></div>
</div>
<p>Users of Oracle Autonomous Database should use this syntax. If the database is
configured for mutural TLS (“mTLS”), then you must also configure the cloud
wallet as shown in cx_Oracle documentation <a class="reference external" href="https://cx-oracle.readthedocs.io/en/latest/user_guide/connection_handling.html#autonomousdb">Connecting to Autononmous Databases</a>.</p>
</section>
<section id="sid-connections">
<h4>SID Connections<a class="headerlink" href="#sid-connections" title="Link to this heading">¶</a></h4>
<p>To use Oracle Database’s obsolete System Identifier connection syntax, the SID
can be passed in a “database name” portion of the URL:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://scott:tiger@hostname:port/dbname&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>Above, the DSN passed to cx_Oracle is created by <code class="docutils literal notranslate"><span class="pre">cx_Oracle.makedsn()</span></code> as
follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">cx_Oracle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cx_Oracle</span><span class="o">.</span><span class="n">makedsn</span><span class="p">(</span><span class="s2">&quot;hostname&quot;</span><span class="p">,</span> <span class="mi">1521</span><span class="p">,</span> <span class="n">sid</span><span class="o">=</span><span class="s2">&quot;dbname&quot;</span><span class="p">)</span>
<span class="go">&#39;(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=hostname)(PORT=1521))(CONNECT_DATA=(SID=dbname)))&#39;</span></pre></div>
</div>
<p>Note that although the SQLAlchemy syntax <code class="docutils literal notranslate"><span class="pre">hostname:port/dbname</span></code> looks like
Oracle’s Easy Connect syntax it is different. It uses a SID in place of the
service name required by Easy Connect.  The Easy Connect syntax does not
support SIDs.</p>
</section>
</section>
<section id="passing-cx-oracle-connect-arguments">
<h3>Passing cx_Oracle connect arguments<a class="headerlink" href="#passing-cx-oracle-connect-arguments" title="Link to this heading">¶</a></h3>
<p>Additional connection arguments can usually be passed via the URL query string;
particular symbols like <code class="docutils literal notranslate"><span class="pre">SYSDBA</span></code> are intercepted and converted to the correct
symbol:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://user:pass@dsn?encoding=UTF-8&amp;nencoding=UTF-8&amp;mode=SYSDBA&amp;events=true&quot;</span>
<span class="p">)</span></pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.3: </span>the cx_Oracle dialect now accepts all argument names
within the URL string itself, to be passed to the cx_Oracle DBAPI.   As
was the case earlier but not correctly documented, the
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.connect_args</span></code></a> parameter also accepts all
cx_Oracle DBAPI connect arguments.</p>
</div>
<p>To pass arguments directly to <code class="docutils literal notranslate"><span class="pre">.connect()</span></code> without using the query
string, use the <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.connect_args" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.connect_args</span></code></a> dictionary.
Any cx_Oracle parameter value and/or constant may be passed, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cx_Oracle</span>

<span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://user:pass@dsn&quot;</span><span class="p">,</span>
    <span class="n">connect_args</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;encoding&quot;</span><span class="p">:</span> <span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nencoding&quot;</span><span class="p">:</span> <span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>
        <span class="s2">&quot;mode&quot;</span><span class="p">:</span> <span class="n">cx_Oracle</span><span class="o">.</span><span class="n">SYSDBA</span><span class="p">,</span>
        <span class="s2">&quot;events&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">)</span></pre></div>
</div>
<p>Note that the default driver value for <code class="docutils literal notranslate"><span class="pre">encoding</span></code> and <code class="docutils literal notranslate"><span class="pre">nencoding</span></code> was
changed to “UTF-8” in cx_Oracle 8.0 so these parameters can be omitted when
using that version, or later.</p>
</section>
<section id="options-consumed-by-the-sqlalchemy-cx-oracle-dialect-outside-of-the-driver">
<h3>Options consumed by the SQLAlchemy cx_Oracle dialect outside of the driver<a class="headerlink" href="#options-consumed-by-the-sqlalchemy-cx-oracle-dialect-outside-of-the-driver" title="Link to this heading">¶</a></h3>
<p>There are also options that are consumed by the SQLAlchemy cx_oracle dialect
itself.  These options are always passed directly to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>
, such as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://user:pass@dsn&quot;</span><span class="p">,</span> <span class="n">coerce_to_decimal</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span></pre></div>
</div>
<p>The parameters accepted by the cx_oracle dialect are as follows:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">arraysize</span></code> - set the cx_oracle.arraysize value on cursors; defaults
to <code class="docutils literal notranslate"><span class="pre">None</span></code>, indicating that the driver default should be used (typically
the value is 100).  This setting controls how many rows are buffered when
fetching rows, and can have a significant effect on performance when
modified.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 2.0.26: </span>- changed the default value from 50 to None,
to use the default value of the driver itself.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">auto_convert_lobs</span></code> - defaults to True; See <a class="reference internal" href="#cx-oracle-lob"><span class="std std-ref">LOB Datatypes</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">coerce_to_decimal</span></code> - see <a class="reference internal" href="#cx-oracle-numeric"><span class="std std-ref">Precision Numerics</span></a> for detail.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">encoding_errors</span></code> - see <a class="reference internal" href="#cx-oracle-unicode-encoding-errors"><span class="std std-ref">Encoding Errors</span></a> for detail.</p></li>
</ul>
</section>
<section id="using-cx-oracle-sessionpool">
<span id="cx-oracle-sessionpool"></span><h3>Using cx_Oracle SessionPool<a class="headerlink" href="#using-cx-oracle-sessionpool" title="Link to this heading">¶</a></h3>
<p>The cx_Oracle driver provides its own connection pool implementation that may
be used in place of SQLAlchemy’s pooling functionality. The driver pool
supports Oracle Database features such dead connection detection, connection
draining for planned database downtime, support for Oracle Application
Continuity and Transparent Application Continuity, and gives support for
Database Resident Connection Pooling (DRCP).</p>
<p>Using the driver pool can be achieved by using the
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.creator" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.creator</span></code></a> parameter to provide a function that
returns a new connection, along with setting
<a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine.params.pool_class" title="sqlalchemy.create_engine"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">create_engine.pool_class</span></code></a> to <code class="docutils literal notranslate"><span class="pre">NullPool</span></code> to disable
SQLAlchemy’s pooling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cx_Oracle</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.pool</span> <span class="kn">import</span> <span class="n">NullPool</span>

<span class="n">pool</span> <span class="o">=</span> <span class="n">cx_Oracle</span><span class="o">.</span><span class="n">SessionPool</span><span class="p">(</span>
    <span class="n">user</span><span class="o">=</span><span class="s2">&quot;scott&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
    <span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;orclpdb&quot;</span><span class="p">,</span>
    <span class="n">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">max</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="n">increment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>
    <span class="n">nencoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://&quot;</span><span class="p">,</span> <span class="n">creator</span><span class="o">=</span><span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">,</span> <span class="n">poolclass</span><span class="o">=</span><span class="n">NullPool</span>
<span class="p">)</span></pre></div>
</div>
<p>The above engine may then be used normally where cx_Oracle’s pool handles
connection pooling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;select 1 from dual&quot;</span><span class="p">))</span></pre></div>
</div>
<p>As well as providing a scalable solution for multi-user applications, the
cx_Oracle session pool supports some Oracle features such as DRCP and
<a class="reference external" href="https://cx-oracle.readthedocs.io/en/latest/user_guide/ha.html#application-continuity-ac">Application Continuity</a>.</p>
<p>Note that the pool creation parameters <code class="docutils literal notranslate"><span class="pre">threaded</span></code>, <code class="docutils literal notranslate"><span class="pre">encoding</span></code> and
<code class="docutils literal notranslate"><span class="pre">nencoding</span></code> were deprecated in later cx_Oracle releases.</p>
</section>
<section id="id4">
<h3>Using Oracle Database Resident Connection Pooling (DRCP)<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h3>
<p>When using Oracle Database’s DRCP, the best practice is to pass a connection
class and “purity” when acquiring a connection from the SessionPool.  Refer to
the <a class="reference external" href="https://cx-oracle.readthedocs.io/en/latest/user_guide/connection_handling.html#database-resident-connection-pooling-drcp">cx_Oracle DRCP documentation</a>.</p>
<p>This can be achieved by wrapping <code class="docutils literal notranslate"><span class="pre">pool.acquire()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cx_Oracle</span>
<span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span>
<span class="kn">from</span> <span class="nn">sqlalchemy.pool</span> <span class="kn">import</span> <span class="n">NullPool</span>

<span class="n">pool</span> <span class="o">=</span> <span class="n">cx_Oracle</span><span class="o">.</span><span class="n">SessionPool</span><span class="p">(</span>
    <span class="n">user</span><span class="o">=</span><span class="s2">&quot;scott&quot;</span><span class="p">,</span>
    <span class="n">password</span><span class="o">=</span><span class="s2">&quot;tiger&quot;</span><span class="p">,</span>
    <span class="n">dsn</span><span class="o">=</span><span class="s2">&quot;orclpdb&quot;</span><span class="p">,</span>
    <span class="n">min</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">max</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">increment</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">threaded</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>
    <span class="n">nencoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span><span class="p">,</span>
<span class="p">)</span>


<span class="k">def</span> <span class="nf">creator</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">(</span>
        <span class="n">cclass</span><span class="o">=</span><span class="s2">&quot;MYCLASS&quot;</span><span class="p">,</span> <span class="n">purity</span><span class="o">=</span><span class="n">cx_Oracle</span><span class="o">.</span><span class="n">ATTR_PURITY_SELF</span>
    <span class="p">)</span>


<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://&quot;</span><span class="p">,</span> <span class="n">creator</span><span class="o">=</span><span class="n">creator</span><span class="p">,</span> <span class="n">poolclass</span><span class="o">=</span><span class="n">NullPool</span>
<span class="p">)</span></pre></div>
</div>
<p>The above engine may then be used normally where cx_Oracle handles session
pooling and Oracle Database additionally uses DRCP:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">engine</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
    <span class="n">print</span><span class="p">(</span><span class="n">conn</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="s2">&quot;select 1 from dual&quot;</span><span class="p">))</span></pre></div>
</div>
</section>
<section id="cx-oracle-unicode">
<span id="id5"></span><h3>Unicode<a class="headerlink" href="#cx-oracle-unicode" title="Link to this heading">¶</a></h3>
<p>As is the case for all DBAPIs under Python 3, all strings are inherently
Unicode strings. In all cases however, the driver requires an explicit
encoding configuration.</p>
<section id="id6">
<h4>Ensuring the Correct Client Encoding<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<p>The long accepted standard for establishing client encoding for nearly all
Oracle Database related software is via the <a class="reference external" href="https://www.oracle.com/database/technologies/faq-nls-lang.html">NLS_LANG</a> environment
variable.  Older versions of cx_Oracle use this environment variable as the
source of its encoding configuration.  The format of this variable is
Territory_Country.CharacterSet; a typical value would be
<code class="docutils literal notranslate"><span class="pre">AMERICAN_AMERICA.AL32UTF8</span></code>.  cx_Oracle version 8 and later use the character
set “UTF-8” by default, and ignore the character set component of NLS_LANG.</p>
<p>The cx_Oracle driver also supported a programmatic alternative which is to pass
the <code class="docutils literal notranslate"><span class="pre">encoding</span></code> and <code class="docutils literal notranslate"><span class="pre">nencoding</span></code> parameters directly to its <code class="docutils literal notranslate"><span class="pre">.connect()</span></code>
function.  These can be present in the URL as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span>
    <span class="s2">&quot;oracle+cx_oracle://scott:tiger@tnsalias?encoding=UTF-8&amp;nencoding=UTF-8&quot;</span>
<span class="p">)</span></pre></div>
</div>
<p>For the meaning of the <code class="docutils literal notranslate"><span class="pre">encoding</span></code> and <code class="docutils literal notranslate"><span class="pre">nencoding</span></code> parameters, please
consult
<a class="reference external" href="https://cx-oracle.readthedocs.io/en/latest/user_guide/globalization.html#globalization">Characters Sets and National Language Support (NLS)</a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://cx-oracle.readthedocs.io/en/latest/user_guide/globalization.html#globalization">Characters Sets and National Language Support (NLS)</a>
- in the cx_Oracle documentation.</p>
</div>
</section>
<section id="id8">
<h4>Unicode-specific Column datatypes<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h4>
<p>The Core expression language handles unicode data by use of the
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a> datatypes.  These types correspond
to the VARCHAR2 and CLOB Oracle Database datatypes by default.  When using
these datatypes with Unicode data, it is expected that the database is
configured with a Unicode-aware character set, as well as that the <code class="docutils literal notranslate"><span class="pre">NLS_LANG</span></code>
environment variable is set appropriately (this applies to older versions of
cx_Oracle), so that the VARCHAR2 and CLOB datatypes can accommodate the data.</p>
<p>In the case that Oracle Database is not configured with a Unicode character
set, the two options are to use the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.NCHAR" title="sqlalchemy.types.NCHAR"><code class="xref py py-class docutils literal notranslate"><span class="pre">NCHAR</span></code></a> and
<a class="reference internal" href="#sqlalchemy.dialects.oracle.NCLOB" title="sqlalchemy.dialects.oracle.NCLOB"><code class="xref py py-class docutils literal notranslate"><span class="pre">NCLOB</span></code></a> datatypes explicitly, or to pass the flag
<code class="docutils literal notranslate"><span class="pre">use_nchar_for_unicode=True</span></code> to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>, which will cause
the SQLAlchemy dialect to use NCHAR/NCLOB for the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> /
<a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a> datatypes instead of VARCHAR/CLOB.</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.3: </span>The <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Unicode" title="sqlalchemy.types.Unicode"><code class="xref py py-class docutils literal notranslate"><span class="pre">Unicode</span></code></a> and <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.UnicodeText" title="sqlalchemy.types.UnicodeText"><code class="xref py py-class docutils literal notranslate"><span class="pre">UnicodeText</span></code></a>
datatypes now correspond to the <code class="docutils literal notranslate"><span class="pre">VARCHAR2</span></code> and <code class="docutils literal notranslate"><span class="pre">CLOB</span></code> Oracle Database
datatypes unless the <code class="docutils literal notranslate"><span class="pre">use_nchar_for_unicode=True</span></code> is passed to the dialect
when <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a> is called.</p>
</div>
</section>
<section id="cx-oracle-unicode-encoding-errors">
<span id="id9"></span><h4>Encoding Errors<a class="headerlink" href="#cx-oracle-unicode-encoding-errors" title="Link to this heading">¶</a></h4>
<p>For the unusual case that data in Oracle Database is present with a broken
encoding, the dialect accepts a parameter <code class="docutils literal notranslate"><span class="pre">encoding_errors</span></code> which will be
passed to Unicode decoding functions in order to affect how decoding errors are
handled.  The value is ultimately consumed by the Python <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes.decode">decode</a> function, and
is passed both via cx_Oracle’s <code class="docutils literal notranslate"><span class="pre">encodingErrors</span></code> parameter consumed by
<code class="docutils literal notranslate"><span class="pre">Cursor.var()</span></code>, as well as SQLAlchemy’s own decoding function, as the
cx_Oracle dialect makes use of both under different circumstances.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.11.</span></p>
</div>
</section>
</section>
<section id="fine-grained-control-over-cx-oracle-data-binding-performance-with-setinputsizes">
<span id="cx-oracle-setinputsizes"></span><h3>Fine grained control over cx_Oracle data binding performance with setinputsizes<a class="headerlink" href="#fine-grained-control-over-cx-oracle-data-binding-performance-with-setinputsizes" title="Link to this heading">¶</a></h3>
<p>The cx_Oracle DBAPI has a deep and fundamental reliance upon the usage of the
DBAPI <code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code> call.  The purpose of this call is to establish the
datatypes that are bound to a SQL statement for Python values being passed as
parameters.  While virtually no other DBAPI assigns any use to the
<code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code> call, the cx_Oracle DBAPI relies upon it heavily in its
interactions with the Oracle Database client interface, and in some scenarios
it is not possible for SQLAlchemy to know exactly how data should be bound, as
some settings can cause profoundly different performance characteristics, while
altering the type coercion behavior at the same time.</p>
<p>Users of the cx_Oracle dialect are <strong>strongly encouraged</strong> to read through
cx_Oracle’s list of built-in datatype symbols at
<a class="reference external" href="https://cx-oracle.readthedocs.io/en/latest/api_manual/module.html#database-types">https://cx-oracle.readthedocs.io/en/latest/api_manual/module.html#database-types</a>.
Note that in some cases, significant performance degradation can occur when
using these types vs. not, in particular when specifying <code class="docutils literal notranslate"><span class="pre">cx_Oracle.CLOB</span></code>.</p>
<p>On the SQLAlchemy side, the <a class="reference internal" href="../core/events.html#sqlalchemy.events.DialectEvents.do_setinputsizes" title="sqlalchemy.events.DialectEvents.do_setinputsizes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.do_setinputsizes()</span></code></a> event can
be used both for runtime visibility (e.g. logging) of the setinputsizes step as
well as to fully control how <code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code> is used on a per-statement
basis.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.2.9: </span>Added <code class="xref py py-meth docutils literal notranslate"><span class="pre">DialectEvents.setinputsizes()</span></code></p>
</div>
<section id="id11">
<h4>Example 1 - logging all setinputsizes calls<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h4>
<p>The following example illustrates how to log the intermediary values from a
SQLAlchemy perspective before they are converted to the raw <code class="docutils literal notranslate"><span class="pre">setinputsizes()</span></code>
parameter dictionary.  The keys of the dictionary are <a class="reference internal" href="../core/sqlelement.html#sqlalchemy.sql.expression.BindParameter" title="sqlalchemy.sql.expression.BindParameter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BindParameter</span></code></a>
objects which have a <code class="docutils literal notranslate"><span class="pre">.key</span></code> and a <code class="docutils literal notranslate"><span class="pre">.type</span></code> attribute:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">event</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+cx_oracle://scott:tiger@host/xe&quot;</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;do_setinputsizes&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_log_setinputsizes</span><span class="p">(</span><span class="n">inputsizes</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">bindparam</span><span class="p">,</span> <span class="n">dbapitype</span> <span class="ow">in</span> <span class="n">inputsizes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Bound parameter name: </span><span class="si">%s</span><span class="s2">  SQLAlchemy type: </span><span class="si">%r</span><span class="s2"> DBAPI object: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">bindparam</span><span class="o">.</span><span class="n">key</span><span class="p">,</span>
            <span class="n">bindparam</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
            <span class="n">dbapitype</span><span class="p">,</span>
        <span class="p">)</span></pre></div>
</div>
</section>
<section id="id12">
<h4>Example 2 - remove all bindings to CLOB<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">CLOB</span></code> datatype in cx_Oracle incurs a significant performance overhead,
however is set by default for the <code class="docutils literal notranslate"><span class="pre">Text</span></code> type within the SQLAlchemy 1.2
series.   This setting can be modified as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">create_engine</span><span class="p">,</span> <span class="n">event</span>
<span class="kn">from</span> <span class="nn">cx_Oracle</span> <span class="kn">import</span> <span class="n">CLOB</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+cx_oracle://scott:tiger@host/xe&quot;</span><span class="p">)</span>


<span class="nd">@event</span><span class="o">.</span><span class="n">listens_for</span><span class="p">(</span><span class="n">engine</span><span class="p">,</span> <span class="s2">&quot;do_setinputsizes&quot;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_remove_clob</span><span class="p">(</span><span class="n">inputsizes</span><span class="p">,</span> <span class="n">cursor</span><span class="p">,</span> <span class="n">statement</span><span class="p">,</span> <span class="n">parameters</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">bindparam</span><span class="p">,</span> <span class="n">dbapitype</span> <span class="ow">in</span> <span class="n">list</span><span class="p">(</span><span class="n">inputsizes</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">dbapitype</span> <span class="ow">is</span> <span class="n">CLOB</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">inputsizes</span><span class="p">[</span><span class="n">bindparam</span><span class="p">]</span></pre></div>
</div>
</section>
</section>
<section id="cx-oracle-lob">
<span id="id13"></span><h3>LOB Datatypes<a class="headerlink" href="#cx-oracle-lob" title="Link to this heading">¶</a></h3>
<p>LOB datatypes refer to the “large object” datatypes such as CLOB, NCLOB and
BLOB. Modern versions of cx_Oracle is optimized for these datatypes to be
delivered as a single buffer. As such, SQLAlchemy makes use of these newer type
handlers by default.</p>
<p>To disable the use of newer type handlers and deliver LOB objects as classic
buffered objects with a <code class="docutils literal notranslate"><span class="pre">read()</span></code> method, the parameter
<code class="docutils literal notranslate"><span class="pre">auto_convert_lobs=False</span></code> may be passed to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>,
which takes place only engine-wide.</p>
</section>
<section id="cx-oracle-returning">
<span id="id14"></span><h3>RETURNING Support<a class="headerlink" href="#cx-oracle-returning" title="Link to this heading">¶</a></h3>
<p>The cx_Oracle dialect implements RETURNING using OUT parameters.
The dialect supports RETURNING fully.</p>
</section>
<section id="two-phase-transactions-not-supported">
<h3>Two Phase Transactions Not Supported<a class="headerlink" href="#two-phase-transactions-not-supported" title="Link to this heading">¶</a></h3>
<p>Two phase transactions are <strong>not supported</strong> under cx_Oracle due to poor driver
support. The newer <a class="reference internal" href="#oracledb"><span class="std std-ref">python-oracledb</span></a> dialect however <strong>does</strong> support two phase
transactions.</p>
</section>
<section id="cx-oracle-numeric">
<span id="id15"></span><h3>Precision Numerics<a class="headerlink" href="#cx-oracle-numeric" title="Link to this heading">¶</a></h3>
<p>SQLAlchemy’s numeric types can handle receiving and returning values as Python
<code class="docutils literal notranslate"><span class="pre">Decimal</span></code> objects or float objects.  When a <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a> object, or a
subclass such as <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Float" title="sqlalchemy.types.Float"><code class="xref py py-class docutils literal notranslate"><span class="pre">Float</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DOUBLE_PRECISION</span></code> etc. is in
use, the <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric.params.asdecimal" title="sqlalchemy.types.Numeric"><code class="xref py py-paramref docutils literal notranslate"><span class="pre">Numeric.asdecimal</span></code></a> flag determines if values should be
coerced to <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> upon return, or returned as float objects.  To make
matters more complicated under Oracle Database, the <code class="docutils literal notranslate"><span class="pre">NUMBER</span></code> type can also
represent integer values if the “scale” is zero, so the Oracle
Database-specific <a class="reference internal" href="#sqlalchemy.dialects.oracle.NUMBER" title="sqlalchemy.dialects.oracle.NUMBER"><code class="xref py py-class docutils literal notranslate"><span class="pre">NUMBER</span></code></a> type takes this into account as well.</p>
<p>The cx_Oracle dialect makes extensive use of connection- and cursor-level
“outputtypehandler” callables in order to coerce numeric values as requested.
These callables are specific to the specific flavor of <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a> in
use, as well as if no SQLAlchemy typing objects are present.  There are
observed scenarios where Oracle Database may send incomplete or ambiguous
information about the numeric types being returned, such as a query where the
numeric types are buried under multiple levels of subquery.  The type handlers
do their best to make the right decision in all cases, deferring to the
underlying cx_Oracle DBAPI for all those cases where the driver can make the
best decision.</p>
<p>When no typing objects are present, as when executing plain SQL strings, a
default “outputtypehandler” is present which will generally return numeric
values which specify precision and scale as Python <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> objects.  To
disable this coercion to decimal for performance reasons, pass the flag
<code class="docutils literal notranslate"><span class="pre">coerce_to_decimal=False</span></code> to <a class="reference internal" href="../core/engines.html#sqlalchemy.create_engine" title="sqlalchemy.create_engine"><code class="xref py py-func docutils literal notranslate"><span class="pre">create_engine()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">engine</span> <span class="o">=</span> <span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;oracle+cx_oracle://dsn&quot;</span><span class="p">,</span> <span class="n">coerce_to_decimal</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">coerce_to_decimal</span></code> flag only impacts the results of plain string
SQL statements that are not otherwise associated with a <a class="reference internal" href="../core/type_basics.html#sqlalchemy.types.Numeric" title="sqlalchemy.types.Numeric"><code class="xref py py-class docutils literal notranslate"><span class="pre">Numeric</span></code></a>
SQLAlchemy type (or a subclass of such).</p>
<div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.2: </span>The numeric handling system for cx_Oracle has been
reworked to take advantage of newer cx_Oracle features as well
as better integration of outputtypehandlers.</p>
</div>
</section>
</section>
</section>

    </div>

</div>

<div id="docs-bottom-navigation" class="docs-navigation-links, withsidebar">
        Previous:
        <a href="sqlite.html" title="previous chapter">SQLite</a>
        Next:
        <a href="mssql.html" title="next chapter">Microsoft SQL Server</a>

    <div id="docs-copyright">
        &copy; <a href="../copyright.html">Copyright</a> 2007-2025, the SQLAlchemy authors and contributors.


    <p><b>flambé!</b> the dragon and <b><i>The Alchemist</i></b> image designs created and generously donated by <a href="https://github.com/vmalloc">Rotem Yaari</a>.</p>

        Created using <a href="https://www.sphinx-doc.org">Sphinx</a> 7.2.6.

    Documentation last generated: Wed 22 Jan 2025 04:45:58 PM  EST

    </div>
</div>

</div>



        
        

    <script type="text/javascript">
      document.documentElement.dataset.content_root = '../';

    </script>

    <!-- begin iterate through sphinx environment script_files -->
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script type="text/javascript" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/sphinx_highlight.js"></script>
        <script type="text/javascript" src="../_static/clipboard.min.js"></script>
        <script type="text/javascript" src="../_static/copybutton.js"></script>
    <!-- end iterate through sphinx environment script_files -->

    <script type="text/javascript" src="../_static/init.js"></script>


    </body>
</html>


